var Be=Object.defineProperty;var Ce=(i,r,A)=>r in i?Be(i,r,{enumerable:!0,configurable:!0,writable:!0,value:A}):i[r]=A;var t=(i,r,A)=>(Ce(i,typeof r!="symbol"?r+"":r,A),A),wA=(i,r,A)=>{if(!r.has(i))throw TypeError("Cannot "+A)};var o=(i,r,A)=>(wA(i,r,"read from private field"),A?A.call(i):r.get(i)),m=(i,r,A)=>{if(r.has(i))throw TypeError("Cannot add the same private member more than once");r instanceof WeakSet?r.add(i):r.set(i,A)},I=(i,r,A,e)=>(wA(i,r,"write to private field"),e?e.call(i,A):r.set(i,A),A);var IA=(i,r,A,e)=>({set _(s){I(i,r,s,A)},get _(){return o(i,r,e)}}),b=(i,r,A)=>(wA(i,r,"access private method"),A);import{r as E,i as cA,j as h,F as fe,l as me,m as pe,n as Ee,_ as S,o as NA,p as Qe,q as we,s as Ie}from"./index-Z7Wm_S2L.js";import{r as a,G as ve,V as c,S as De,C as xe,u as vA,a as ye}from"./index-8PGxvhlL.js";import{u as Se,a as ke}from"./react-spring_web.modern-y0vcjmN7.js";var Oe=function(){},XA=typeof window<"u",je=XA?E.useLayoutEffect:E.useEffect,JA={x:0,y:0,width:0,height:0,top:0,left:0,bottom:0,right:0};function Me(){var i=E.useState(null),r=i[0],A=i[1],e=E.useState(JA),s=e[0],n=e[1],u=E.useMemo(function(){return new window.ResizeObserver(function(l){if(l[0]){var C=l[0].contentRect,B=C.x,p=C.y,M=C.width,K=C.height,T=C.top,BA=C.left,tA=C.bottom,CA=C.right;n({x:B,y:p,width:M,height:K,top:T,left:BA,bottom:tA,right:CA})}})},[]);return je(function(){if(r)return u.observe(r),function(){u.disconnect()}},[r]),[A,s]}const be=XA&&typeof window.ResizeObserver<"u"?Me:function(){return[Oe,JA]};function Fe(i){return cA({tag:"svg",attr:{version:"1.2",baseProfile:"tiny",viewBox:"0 0 24 24"},child:[{tag:"path",attr:{d:"M20.177 3.823c-.382-.383-.894-.586-1.415-.586-.25 0-.503.047-.744.144-4.449 1.787-7.792 4.76-10.517 9.357-.102.172-.163.355-.209.542-1.38.215-2.6.903-3.442 1.993-.916 1.185-1.295 2.695-1.066 4.254l.216 1.473 1.473.217c.293.043.589.064.88.064 2.743 0 4.949-1.909 5.367-4.564.188-.047.371-.115.544-.218 4.598-2.728 7.571-6.069 9.355-10.517.298-.743.123-1.593-.442-2.159zm-14.824 15.458c-.192 0-.389-.016-.59-.044-.309-2.104 1.055-3.81 3-4.021l1.021 1.021c-.192 1.76-1.605 3.044-3.431 3.044zm4.89-4.502l-1.021-1.021c.38-.641.774-1.233 1.178-1.804.027.041 1.639 1.653 1.639 1.653-.568.401-1.158.794-1.796 1.172zm2.608-1.773s-1.821-1.801-1.879-1.824c2.147-2.784 4.651-4.685 7.791-5.943-1.255 3.127-3.144 5.623-5.912 7.767z"},child:[]}]})(i)}function Re(i){return cA({tag:"svg",attr:{viewBox:"0 0 24 24"},child:[{tag:"path",attr:{d:"M12 22c4.636 0 8-3.468 8-8.246C20 7.522 12.882 2.4 12.579 2.185a1 1 0 0 0-1.156-.001C11.12 2.397 4 7.503 4 13.75 4 18.53 7.364 22 12 22zm-.001-17.74C13.604 5.55 18 9.474 18 13.754 18 17.432 15.532 20 12 20s-6-2.57-6-6.25c0-4.29 4.394-8.203 5.999-9.49z"},child:[]}]})(i)}function Ge(i){return cA({tag:"svg",attr:{viewBox:"0 0 24 24"},child:[{tag:"path",attr:{d:"M5.122 21c.378.378.88.586 1.414.586S7.572 21.378 7.95 21l4.336-4.336a7.495 7.495 0 0 0 2.217.333 7.446 7.446 0 0 0 5.302-2.195 7.484 7.484 0 0 0 1.632-8.158l-.57-1.388-4.244 4.243-2.121-2.122 4.243-4.243-1.389-.571A7.478 7.478 0 0 0 14.499 2c-2.003 0-3.886.78-5.301 2.196a7.479 7.479 0 0 0-1.862 7.518L3 16.05a2.001 2.001 0 0 0 0 2.828L5.122 21zm4.548-8.791-.254-.616a5.486 5.486 0 0 1 1.196-5.983 5.46 5.46 0 0 1 4.413-1.585l-3.353 3.353 4.949 4.95 3.355-3.355a5.49 5.49 0 0 1-1.587 4.416c-1.55 1.55-3.964 2.027-5.984 1.196l-.615-.255-5.254 5.256h.001l-.001 1v-1l-2.122-2.122 5.256-5.255z"},child:[]}]})(i)}function ze(i){return cA({tag:"svg",attr:{viewBox:"0 0 512 512"},child:[{tag:"path",attr:{d:"M236 96c-70 0-127.8 59.7-127.8 130.8 0 4.3.3 8.6.8 12.8-43.2 3.9-77 44-77 88.4 0 47 37.9 88 84.6 88h257.8c58.3 0 105.6-49.4 105.6-108s-47.3-108.8-105.6-108.8c-2.3 0-4.8-.2-7.2-.2-2.1 0-4.2 0-6.1.1C349.3 145.6 306 96 236 96z"},child:[]}]})(i)}function UA({id:i,label:r,checked:A,onChange:e}){function s(n){e&&e(n.target.checked)}return h.jsxs("div",{children:[h.jsx("input",{id:i,type:"checkbox",checked:A,onChange:s}),r||i?h.jsx("label",{htmlFor:i,children:r||i}):void 0]})}class w{}class He extends w{constructor(A,e=3,s=5,n=.005){super();t(this,"spawn");t(this,"breedMinAge");t(this,"breedMaxAge");t(this,"breedChance");this.spawn=A,this.breedMinAge=e,this.breedMaxAge=s,this.breedChance=n}step({cell:A,grid:e}){if(A.isSleeping()||A.age<this.breedMinAge||A.age>this.breedMaxAge||a()>this.breedChance)return;const s=A.dir.S();s&&s.constructor.prototype===A.constructor.prototype&&(s.age<this.breedMinAge||s.age>this.breedMaxAge||A.getNeighbourhood().every(n=>n!=null&&n.empty?(e.setAtIndex(n.index,this.spawn()),!1):!0))}}var P,N,j,F,iA,KA,rA,TA;class gA extends ve{constructor(A,e){super(A);m(this,iA);m(this,rA);t(this,"shouldTryAwakeNeighbours");t(this,"empty");t(this,"color");t(this,"index",-1);t(this,"position",new c(0,0));t(this,"age",0);t(this,"brushSize",4);t(this,"brushFillRate",.05);t(this,"velocity",new c(0,0));m(this,P,!1);m(this,N,{});m(this,j,void 0);m(this,F,void 0);const{empty:s,shouldTryAwakeNeighbours:n,behaviors:u,conditionalBehaviors:l}={empty:!1,shouldTryAwakeNeighbours:!0,behaviors:[],conditionalBehaviors:[],...e};this.empty=s,this.shouldTryAwakeNeighbours=n,this.color=this.getRGBA(),I(this,j,u),I(this,F,new Set(l))}get behaviors(){return o(this,j)}isSleeping(){return o(this,P)}sleep(){this.isSleeping()||(I(this,P,!0),this.grid.registerChanged(this))}awake(){this.isSleeping()&&(I(this,P,!1),this.grid.registerChanged(this))}die(){this.grid.set(this.position,this.grid.createEmpty())}getRGBA(){return this.color}hasBehavior(A){const e=A.name;return o(this,N)[e]!==void 0}getBehavior(A){return o(this,N)[A.name]}removeBehavior(A){if(!this.hasBehavior(A))return;if(!this.getBehavior(A))throw new Error("Behavior doesn't exist");I(this,j,o(this,j).filter(s=>!(s instanceof A)))}addDelayedBehaviors(A,...e){A()?this.addBehaviors(...e):o(this,F).add([A,e])}addBehaviors(...A){A.forEach(e=>{this.hasBehavior(e.constructor)||(o(this,j).push(e),b(this,iA,KA).call(this,e))})}swapWith(A){super.swapWith(A),this.awake(),A.awake()}step(A){this.age+=A,o(this,F).size>0&&b(this,rA,TA).call(this),o(this,j).forEach(e=>{const s=e.step({deltaTime:A,cell:this,grid:this.grid});return s===void 0?!0:s})}}P=new WeakMap,N=new WeakMap,j=new WeakMap,F=new WeakMap,iA=new WeakSet,KA=function(A){const e=A.constructor.name;o(this,N)[e]=A},rA=new WeakSet,TA=function(){o(this,F).forEach(A=>{const[e,s]=A;e()&&(o(this,F).delete(A),this.addBehaviors(...s))})};class J extends gA{constructor(r,A){super(r,A);const{gravity:e,dispersionRate:s,erosionFactor:n}={gravity:z.defaultGravity,...A};this.addBehaviors(new z({gravity:e}),new Ne({dispersionRate:s}),new We(n))}step(r){if(super.step(r),a()>.2)return;const A=this.dir.N();A instanceof J&&this.density<A.density&&this.swapWith(A)}}class G extends J{}class AA extends w{constructor(A=1){super();t(this,"sinkChance");this.sinkChance=A}step({cell:A}){if(A.isSleeping()||a()>this.sinkChance)return;const e=A.dir.S();if(e instanceof G){A.swapWith(e);return}const s=[-1,1];a()>=.5&&s.reverse(),s.every(n=>{const u=A.getNeighbourInDirection(new c(n,1));return u instanceof G?(A.swapWith(u),!1):!0})}}class uA extends gA{}class O extends uA{constructor(r,A){super(r,A),this.addBehaviors(new z)}}class Pe extends w{constructor(A=.05){super();t(this,"digChance");this.digChance=A}step({cell:A}){if(a()>this.digChance)return;const e=A.getNeighbourhood().filter(s=>s&&!(s!=null&&s.empty)&&s instanceof O);if(e.length>0){const s=e[Math.floor(a()*e.length)];if(!s)return;A.swapWith(s)}}}var Z,U;class Ne extends w{constructor(A){const{dispersionRate:e,fluidDispersionFactor:s,maxFramesOfMovementWithoutSleep:n}={dispersionRate:10,fluidDispersionFactor:.05,maxFramesOfMovementWithoutSleep:250+a()*250,...A};super();m(this,Z,0);m(this,U,void 0);t(this,"dispersionRate");t(this,"fluidDispersionFactor");this.dispersionRate=e,this.fluidDispersionFactor=s,I(this,U,n)}step({cell:A,grid:e}){var u,l;let s=!1;const n=[-1,1];if(a()>=.5&&n.reverse(),A.isSleeping()){n.every(C=>{const B=A.getNeighbourInDirection(new c(C,0));return B!=null&&B.empty?(A.swapWith(B),!1):!0});return}o(this,U)<0||o(this,Z)<=o(this,U)?n.every(C=>(e.getPositionsInLine(A.position,A.position.add(new c(C*this.dispersionRate,0)),{excludeStart:!0}).every(B=>{const p=e.getAtPosition(B);return p!=null&&p.empty||A instanceof J&&p instanceof J&&a()<this.fluidDispersionFactor?(A.swapWith(p),s=!0,IA(this,Z)._++,!1):!(p instanceof uA)}),!s)):((u=A.dir.W())!=null&&u.empty||(l=A.dir.E())!=null&&l.empty)&&A.die()}}Z=new WeakMap,U=new WeakMap;class Ue extends w{constructor(A=.05){super();t(this,"survivalChance");this.survivalChance=A}step({cell:A}){if(a()<this.survivalChance)return;A.getNeighbourhood().map(n=>n instanceof G?1:0).reduce((n,u)=>n+u)>2&&A.die()}}var Y;class Ye extends w{constructor(A=.05,e=5){super();t(this,"eatChance");t(this,"starveTime");m(this,Y,0);this.eatChance=A,this.starveTime=e}step({cell:A,deltaTime:e}){if(I(this,Y,o(this,Y)+e),o(this,Y)>this.starveTime){A.die();return}if(a()>this.eatChance)return;const s=A.getNeighbourhood().filter(n=>n&&!(n!=null&&n.empty)&&n instanceof VA);if(s.length>0){const n=s[Math.floor(a()*s.length)];if(!n)return;n.die(),I(this,Y,0)}}}Y=new WeakMap;class We extends w{constructor(A=.005){super();t(this,"erosionFactor");this.erosionFactor=A}step({cell:A}){if(this.erosionFactor>0){const e=A.dir.S();e instanceof O&&a()<this.erosionFactor&&A.swapWith(e)}}}class H extends w{constructor(A){super();t(this,"minAge");t(this,"maxAge");t(this,"survivalChance");const{minAge:e,maxAge:s,survivalChance:n}={minAge:1,maxAge:100,survivalChance:.95,...A};this.minAge=e,this.maxAge=s,this.survivalChance=n}step({cell:A}){A.age<this.minAge||(A.age>this.maxAge&&A.die(),a()>this.survivalChance&&A.die())}}class lA extends w{step(){}}class sA extends w{step(){}}class k extends w{constructor(A=.05){super();t(this,"ignitionFactor");this.ignitionFactor=A}step({grid:A,cell:e}){if(this.ignitionFactor>0){if(a()>this.ignitionFactor)return;const s=e.getNeighbourhood();s.map(u=>u!=null&&u.hasBehavior(sA)?1:0).reduce((u,l)=>u+l)/s.length>0&&A.setAtIndex(e.index,new ZA(A))}}}var R,V;class yA extends w{constructor(A){super();t(this,"isGlittering",!1);t(this,"glitterChance");t(this,"glitterMaxTime");t(this,"glitterColor");m(this,R,void 0);m(this,V,0);const{glitterChance:e,glitterMaxTime:s,glitterColor:n}={glitterChance:2e-4,glitterMaxTime:.1,glitterColor:[255,255,255,255],...A};this.glitterChance=e,this.glitterMaxTime=s,this.glitterColor=n}step({grid:A,cell:e,deltaTime:s}){this.isGlittering?(I(this,V,o(this,V)+s),o(this,V)>this.glitterMaxTime&&(o(this,R)&&(e.color=o(this,R),I(this,R,void 0),A.registerChanged(e)),this.isGlittering=!1)):a()<this.glitterChance&&(I(this,R,e.color),e.color=this.glitterColor,this.isGlittering=!0,A.registerChanged(e))}}R=new WeakMap,V=new WeakMap;class eA extends uA{constructor(A,e){super(A,{shouldTryAwakeNeighbours:!1,...e});t(this,"brushSize",2);t(this,"brushFillRate",1);this.sleep()}awake(){}}var W,nA,aA;const oA=class oA extends w{constructor(A){super();m(this,W,0);m(this,nA,100);m(this,aA,c.one.multiplyScalar(50));t(this,"isFalling",!0);t(this,"gravity");t(this,"sideStep");t(this,"bounce");const{gravity:e,sideStep:s,bounce:n}={gravity:oA.defaultGravity,sideStep:!0,bounce:!0,...A};this.gravity=e,this.sideStep=s,this.bounce=n}step({cell:A,grid:e,deltaTime:s}){let n=!1;const u=[-1,1];if(a()>=.5&&u.reverse(),A.isSleeping()){const l=A.getNeighbourInDirection(this.gravity.y<0?c.up:c.down);l!=null&&l.empty&&(A.swapWith(l),n=!0,this.isFalling=!0)}else{A.velocity=c.min(A.velocity.add(this.gravity.multiplyScalar(s)),o(this,aA));let l=A;A.getLineTo(A.position.add(A.velocity),{excludeStart:!0}).every(C=>{const B=e.get(C);if(!(B!=null&&B.empty)){if(this.isFalling&&(B instanceof eA||B instanceof O)&&(A.velocity=A.velocity.multiplyScalar(.8),this.bounce)){const p=A.velocity.subtract((B==null?void 0:B.velocity)||c.zero).abs();if(p.length()>0){const M=a()*.2,K=a()*.05;A.velocity=new c(A.velocity.x+(a()<.5?-1:1)*p.y*M,-p.y*K),l=A}}return!1}return l=B,!0}),l!==A?(A.swapWith(l),n=!0):this.sideStep&&u.every(C=>{const B=A.getNeighbourInDirection(new c(C,1));return B!=null&&B.empty?(A.swapWith(B),n=!0,!1):!0})}n?(u.every(l=>{const C=A.getNeighbourInDirection(new c(l,0));return C!=null&&C.empty||C==null||C.awake(),!0}),I(this,W,0)):(this.isFalling=!1,A.velocity=c.zero,IA(this,W)._++,o(this,W)>=o(this,nA)&&A.sleep())}};W=new WeakMap,nA=new WeakMap,aA=new WeakMap,t(oA,"defaultGravity",new c(0,9.81));let z=oA;class qA extends w{constructor(A=.05,e=1,s=2){super();t(this,"jumpChance");t(this,"jumpHeight");t(this,"jumpLength");this.jumpChance=A,this.jumpHeight=e,this.jumpLength=s}step({cell:A}){if(!A.velocity.abs().isNear(c.zero,.5)||a()>this.jumpChance)return;const e=(a()*2-1)*this.jumpLength,s=-a()*this.jumpHeight;A.velocity=new c(e,s),a()<.1&&(A.velocity=A.velocity.multiplyScalar(1.2)),A.awake()}}class Le extends w{step({cell:r}){if(!r.isSleeping()||a()<.995)return;r.getNeighbourhood().map(s=>s===void 0?1:s.empty?.5:s instanceof $A?-1:s instanceof uA?2:s instanceof G?1:0).reduce((s,n)=>s+n)>0&&r.die()}}class Xe extends O{constructor(A,e){super(A,e);t(this,"name","coal");t(this,"_r",a()*20);t(this,"color",[80-this._r,80-this._r,80-this._r,255]);this.addBehaviors(new AA,new k)}}class Je extends gA{constructor(A){super(A,{empty:!0});t(this,"name","empty");t(this,"brushSize",2);t(this,"brushFillRate",1);t(this,"color",[0,0,0,0]);this.sleep()}awake(){}step(){}}class SA extends gA{constructor(A,e){super(A,{shouldTryAwakeNeighbours:!0,...e});t(this,"brushSize",4);t(this,"brushFillRate",.5);this.awake()}sleep(){}}var v,L,_,DA;class ZA extends SA{constructor(A,e){super(A,e);m(this,_);t(this,"name","fire");t(this,"brushFillRate",.05);m(this,v,a()*20);m(this,L,[[171-o(this,v),42,37,235+o(this,v)],[222-o(this,v),55,49,235+o(this,v)],[222-o(this,v),109,56,235+o(this,v)],[255-o(this,v),155,79,235+o(this,v)],[252-o(this,v),249,96,235+o(this,v)]]);t(this,"graceTime",a()*.4+.1);this.velocity=c.random().multiply(new c(.2,-.3)),this.addDelayedBehaviors(()=>this.getNeighbourhood().find(s=>(s==null?void 0:s.hasBehavior(k))||!1)?!1:this.age>=this.graceTime,new z({gravity:c.up})),this.addBehaviors(new sA,new H({minAge:5,maxAge:8,survivalChance:.99})),b(this,_,DA).call(this),this.awake()}step(A){if(super.step(A),b(this,_,DA).call(this),this.age<=this.graceTime)return;this.getNeighbourhood().map(n=>n?n.hasBehavior(lA)?-2:n.hasBehavior(sA)?2:n.hasBehavior(k)?1:-.1:0).reduce((n,u)=>n+u)<-.5&&this.die()}isSleeping(){return!1}sleep(){}die(){this.grid.setAtIndex(this.index,a()<.2?this.grid.createEmpty():a()<.1?new Ve(this.grid):a()<.4?new OA(this.grid):new jA(this.grid))}}v=new WeakMap,L=new WeakMap,_=new WeakSet,DA=function(){const A=Math.floor(a()*o(this,L).length)%o(this,L).length;this.color=o(this,L)[A],this.grid.registerChanged(this)};class kA extends O{constructor(A,e){super(A,e);t(this,"name","flea");t(this,"_r",a()*20);t(this,"color",[0,this._r,0,255]);t(this,"brushFillRate",.005);const s=7;this.addDelayedBehaviors(()=>this.age>2,new qA),this.addBehaviors(new He(()=>new kA(A),2,s,.1),new Ue(.05),new Ye,new Pe,new k)}die(){this.grid.setAtIndex(this.index,new Ke(this,this.grid))}}class Ke extends O{constructor(A,e,s){super(e,s);t(this,"name","dead flea");t(this,"_r",a()*20+10);t(this,"color");this.color=[...A.color.slice(0,3).map(n=>n+this._r),255],this.addBehaviors(new AA,new H({minAge:2,survivalChance:.995}),new k)}}class dA extends J{constructor(r,A){super(r,{dispersionRate:2,gravity:new c(0,-.025),erosionFactor:0,shouldTryAwakeNeighbours:!1,...A})}}class OA extends dA{constructor(A,e){super(A,{gravity:c.up.multiplyScalar(.05),dispersionRate:50,...e});t(this,"name","fumes");t(this,"density",10);t(this,"_r",Math.round(a()*80)+100);t(this,"color",[255,200,200,this._r]);this.addBehaviors(new H({minAge:10}),new k(.2))}die(){this.grid.set(this.position,a()<.1?new _A(this.grid):this.grid.createEmpty())}}class VA extends eA{constructor(A,e){super(A,e);t(this,"name","leaf");t(this,"_r",a()*20);t(this,"brushFillRate",.4);t(this,"color",[100-this._r,180-this._r,100-this._r,255-this._r]);this.addBehaviors(new k(.1))}}function Te(i){const[r,A,e]=i,s=A*Math.min(e,1-e),n=u=>{const l=(u+r/30)%12;return e-s*Math.max(Math.min(l-3,9-l,1),-1)};return[Math.round(n(0)*255),Math.round(n(8)*255),Math.round(n(4)*255)]}class qe extends O{constructor(A,e){super(A,e);t(this,"name","magic dust");t(this,"color",[...Te([Date.now()/20%360,.6,.5]),255]);this.addBehaviors(new AA(.2),new yA,new k)}}class _A extends G{constructor(A,e){super(A,{...e,dispersionRate:3});t(this,"name","oil");t(this,"density",800);t(this,"_r",a()*20);t(this,"color",[80-this._r,70-this._r,130-this._r,255]);this.addBehaviors(new yA({glitterColor:[0,0,0,255]}),new k(.025),new H({minAge:5,survivalChance:.999}))}die(){this.grid.set(this.position,a()<.7?new OA(this.grid):this.grid.createEmpty())}}class Ze extends O{constructor(A,e){super(A,e);t(this,"name","sand");t(this,"_r",a()*20);t(this,"color",[191-this._r,155-this._r,123-this._r,255]);this.addBehaviors(new AA,new lA)}}class jA extends dA{constructor(A,e){super(A,e);t(this,"name","smoke");t(this,"density",10);t(this,"color",[90,90,90,Math.round(a()*185)+70]);this.addBehaviors(new H({minAge:5}))}}class $A extends O{constructor(A,e){super(A,e);t(this,"name","snow");t(this,"_r",a()*20);t(this,"color",[220-this._r,220-this._r,255,255]);this.addBehaviors(new Le,new AA(.05),new lA)}getRGBA(){return this.isSleeping()?this.color:[220,220,255,255]}die(){this.grid.set(this.position,a()<.25?new MA(this.grid):this.grid.createEmpty())}}var D,X,$,xA;class Ve extends SA{constructor(A,e){super(A,e);m(this,$);t(this,"name","spark");t(this,"brushFillRate",.05);m(this,D,a()*20);m(this,X,[[160-o(this,D),20,20,235+o(this,D)],[121-o(this,D),80,20,235+o(this,D)],[225-o(this,D),190-o(this,D),20-o(this,D),235+o(this,D)]]);this.velocity=c.random().multiplyScalar(2).subtractScalar(1).multiply(new c(1,.1)).multiplyScalar(.0025),this.addBehaviors(new z,new sA,new qA(.005),new H({minAge:1,maxAge:5})),b(this,$,xA).call(this),this.awake()}step(A){super.step(A),b(this,$,xA).call(this)}isSleeping(){return!1}sleep(){}die(){this.grid.set(this.position,a()>.25?new jA(this.grid):this.grid.createEmpty())}}D=new WeakMap,X=new WeakMap,$=new WeakSet,xA=function(){const A=Math.floor(a()*o(this,X).length)%o(this,X).length;this.color=o(this,X)[A],this.grid.registerChanged(this)};class Ae extends dA{constructor(A,e){super(A,e);t(this,"name","steam");t(this,"density",10);t(this,"_r",Math.round(a()*80)+100);t(this,"color",[255,255,255,this._r]);this.addBehaviors(new H({minAge:5}))}die(){this.grid.set(this.position,a()<.05?new MA(this.grid):this.grid.createEmpty())}}class _e extends eA{constructor(){super(...arguments);t(this,"name","stone");t(this,"color",[100,100,100,255])}}class MA extends G{constructor(A,e){super(A,{...e,dispersionRate:3});t(this,"_r",Math.round(a()*100)+155);t(this,"name","water");t(this,"density",1e3);t(this,"color",[46,137,255,this._r]);this.addBehaviors(new yA({glitterColor:[86,177,255,255]}),new lA)}die(){this.grid.set(this.position,a()<.25?new Ae(this.grid):this.grid.createEmpty())}}class $e extends eA{constructor(A,e){super(A,e);t(this,"name","wood");t(this,"_r",a()*20);t(this,"color",[180-this._r,100-this._r,100-this._r,255-this._r]);this.addBehaviors(new k)}}var hA,ee;class At extends De{constructor(A){super(A);m(this,hA);t(this,"materialPalette");this.materialPalette=b(this,hA,ee).call(this,this.grid)}createGrid(A){return new xe({...A,createEmpty:e=>new Je(e)})}step(A){this.grid.forEachChangedChunkPass(e=>{e.forEach(s=>{s.haveChanges()&&(s.resetChanges(),s.forEach(n=>n.step(A),{alternateRowDirections:!0}))})})}}hA=new WeakSet,ee=function(A){return Object.fromEntries([()=>A.createEmpty(),()=>new Xe(A),()=>new kA(A),()=>new ZA(A),()=>new OA(A),()=>new VA(A),()=>new qe(A),()=>new _A(A),()=>new Ze(A),()=>new jA(A),()=>new $A(A),()=>new Ae(A),()=>new _e(A),()=>new MA(A),()=>new $e(A)].map(s=>[s().name,s]))};function et(i){const{image:r,offset:A,multiplier:e}=i,[s]=Se(()=>({transform:`translate(${A.multiplyScalar(e).multiplyScalar(100).toArray().map(n=>n+"%").join(", ")}) scale(${1+e})`,config:{mass:5,friction:20,tension:70}}),[A,e]);return h.jsx(ke.div,{className:"layer",style:{...s,backgroundImage:`url(${r})`}})}function te(i){const{layers:r,multiplier:A,style:e}={multiplier:1,...i};E.useEffect(()=>(window.addEventListener("mousemove",u),()=>{window.removeEventListener("mousemove",u)}));const[s,n]=E.useState(new c);function u(l){const C=c.fromArray([window.innerWidth,window.innerHeight]);n(c.fromArray([l.clientX,l.clientY]).divide(C).multiplyScalar(2).subtractScalar(1))}return h.jsx("div",{className:"parallax",style:e,children:r.map((l,C)=>{const{multiplier:B,...p}=l;return h.jsx(et,{multiplier:B*A,...p,offset:s},C)})})}const tt="/assets/1-KSi_JrUG.png",st="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAkAAAAFECAYAAADP44G9AAAAAXNSR0IArs4c6QAABFdJREFUeJzt2UERgEAMBMFAnWYMIBcTuLh7TLeCPFOzMwAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAHtc3/tcp48AANhpzcx9+ggAgJ3WzChAAECKAgQA5ChAAECOAgQA5HiAAIAcExgAkKMAAQA5ChAAkKMAAQA5HiAAIMcEBgDkKEAAQI4CBADkKEAAQI4HCADIMYEBADkKEACQowABADkKEACQ4wECAHJMYABAjgIEAOQoQABAjgIEAOR4gACAHBMYAJCjAAEAOQoQAJCjAAEAOR4gACDHBAYA5ChAAECOAgQA5ChAAECOAgQA5ChAAECOBwgAyDGBAQA5ChAAkKMAAQA5ChAAkOMBAgByTGAAQI4CBADkKEAAQI4CBADkeIAAgBwTGACQowABADkKEACQowABADkeIAAgxwQGAOQoQABAjgIEAOQoQABAjgcIAMgxgQEAOQoQAJCjAAEAOQoQAJDjAQIAckxgAECOAgQA5ChAAECOAgQA5ChAAECOAgQA5HiAAIAcExgAkKMAAQA5ChAAkKMAAQA5HiAAIMcEBgDkKEAAQI4CBADkKEAAQI4HCADIMYEBADkKEACQowABADkKEACQ4wECAHJMYABAjgIEAOQoQABAjgIEAOR4gACAHBMYAJCjAAEAOQoQAJCjAAEAOR4gACDHBAYA5ChAAECOAgQA5ChAAECOAgQA5ChAAECOBwgAyDGBAQA5ChAAkKMAAQA5ChAAkOMBAgByTGAAQI4CBADkKEAAQI4CBADkeIAAgBwTGACQowABADkKEACQowABADkeIAAgxwQGAOQoQABAjgIEAOQoQABAjgcIAMgxgQEAOQoQAJCjAAEAOQoQAJDjAQIAckxgAECOAgQA5ChAAECOAgQA5ChAAECOAgQA5HiAAIAcExgAkKMAAQA5ChAAkKMAAQA5HiAAIMcEBgDkKEAAQI4CBADkKEAAQI4HCADIMYEBADkKEACQowABADk/71MFHcjs5IQAAAAASUVORK5CYII=",it="data:image/png;base64,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",rt="/assets/4-zEwzv9ax.png";function nt(i){return h.jsx(te,{multiplier:-.008,...i,layers:[{image:tt,multiplier:1},{image:st,multiplier:.75},{image:it,multiplier:.5},{image:rt,multiplier:.35}]})}const at="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAkAAAAFECAYAAADP44G9AAAAAXNSR0IArs4c6QAACK1JREFUeJzt3TFyFFcewOERJVO2yzHEzqhy7JBDEHKDvQFn8A24gUMOQUhMvJfYMi68tThiS4Ul0Gi6+73u3/fFkupJ09P90//1zFw9ffLs0wkAIOTR6AUAAGxNAAEAOQIIAMgRQABAjgACAHIEEACQI4AAgBwBBADkCCAAIEcAAQBT+/j8xeI/UwDBBtZ48gJUPH77ZvGfeeWzwACAGhMgACAnEUC2HwCAm2yBAQA5iQkQAMBNAggAyBFAAECOAAIAcgQQXOjDy1ejlwDAmbwKDADIMQECYKjX79+NXsLqvB/dfEyAAIAcEyD8Z3KLwn+kAGUmQABAjgkQAJAjgACAHAEEABNzn+Y6BBA8gJukga08fvtm9BIOyU3QAECOCRAAcDjfmtSbAAEAOSZAwBBu7ATussWHTJsAAQA5JkAAQI4AGsBLqIGj2mLrApZgCwwAyDEBAgByBBAAkCOAAIAcAcQhudEcgK9xEzQAkGMCtDDvbgusycvMYRkmQABAjgkQAJAjgACAHAEEAOQIIAAgRwABADkCCADIGRJA3isHABjJ+wABADm2wACAHAEEAOQIIAAgRwABADkCCADI2VUAfXj5avQSAIAD8DJ4ACBnVxMgAIAlCCAAIEcAAQA5Agg4i8/yA47ATdAAQI4JEGfxVgQAHIEA4iw//P7b6CXAIdhKhLFsgQEAOSZAAECOAAIActIB9Pr9u9FLAAAGcA8QAJCTngABAOua9RWPAggABpo1EJby+O2b0Uu4lS0wACDHBAgAyBFAAECOAAIAcgQQAJAjgACAHAEEAOQIIAAgRwABADkCCADIEUAAQI4AAgByBBAAkCOAAGADr9+/G70EbhBAYR+fvxi9BICMf/3y6+glcMPV0yfPPo1eBADAlkyAAIAcAQQwiHtCYBxbYABAjgkQAJAjgACAHAEEAOQIIAAgRwABADkCCAAm9OHlq9FLODQBBBDh42/25Yfffxu9hEPzPkAAQI4JEACQI4BgY7YhAMazBQYA5JgAAQA5AggAyBFAAECOAAIAcgQQAJAjgACAHAEEAOQIIAAgRwABADkCCADIEUAAQI4AAgByBBAAkCOAAIAcAQQA5AggACBHAAEAOQIIAMgRQABAjgACADI+Pn9xOp1Op6unT559GrwWAIBNmQABADkCCBji8xgaYARbYABAjgkQAJAjgACAHAEEAOQIIGAxH16+Gr0EgHtxEzQAkGMCBADkCCCG834wAGxNADHc47dvRi8h7fX7d6OXALA59wABADkmQABAjgACAHIEEACQI4AAgBwBBADkCCAAIEcAAQA5AggAyBFAAECOAAIAcgQQAJAjgACAHAEEAOQIIAAgRwABADkCCADIEUAAQI4AAgByBBAAkCOAAICc678efX/vL/7uf3+uuBQ+O+cxgSXN/Bz3vACWdH3OF89+Apr55H2Oo/wen81+3PBPHjPg6M4KoNmtfdI+Wphsxd/tbrOFxmzrAVjLoQJobaMuDgLiuL58bAXI/Dwf4TKznOcE0A7McrB8yYVgebf9TWd9/Csc5/BwM5+/BBAPNvOBDUuZ9TgXZlxi1uN6SwIIAGJKAX1X7AkgAOAie5woCSAA4CI3J0p7iSEBBLBD515kSlsejLWXY00AAQQs9V/5Xi5udDz02BZAANzbEiElorjLlttnAgiATd33IieUej4/5luEkAACYCrCh28dA0sEkgACYHMip2PWV4UJIAAuImb4moccH7bAANicoGEUN0EDsBhBwyxm2g4TQAAHN+KiI7raZgqduwggABYnujr2EDu3EUAAHMKXF2JBtKy9hs5dBBAAQwmV+Rwtdm4jgGAFe/xkZLgPsXIs5fOTAIIVXHJS+XT90ze/5uq//3nwz6dBqLSVw+a+BBAMdp/gWeJ71iLGxhE5nE5i56EEEGxgpmBZ2my/29ZBdunvf8l6l7zwiantCZexBBAsYLYIKJvlsdjbZExMLUvczE8AwR1muZCyT0sdP3sLqdNp+Yv/jEElcPZPAMEdLrnwiCcuscfoWZPYYA0CCFZw2wVMFHGTyIGxBNADuZgBl3AOWZ/I5GuuPQkBOCLXt+O7JHJNgACAXbokch8tuA4AgF0QQABAjgACAHIEEACQI4AAgBwBBADkCCAAIEcAAQA5AggAyBFAAECOAAIAcgQQAJAjgACAHAEEAOQIIAAgRwABADkCCADIEUAAQI4AAgByBBAAkCOAAIAcAQQA5AggACBHAAEAOQIIAMgRQABAjgACAHIEEACQI4AAgBwBBADkCCAAIEcAAQA5AggAyBFAAECOAAIAcgQQAJAjgACAHAEEAOQIIAAgRwABADkCCADIEUAAQI4AAgByBBAAkCOAAIAcAQQA5AggACBHAAEAOQIIAMgRQABAjgACAHIEEACQI4AAgBwBBADkCCAAIEcAAQA5AggAyBFAAECOAAIAcgQQAJAjgACAHAEEAOQIIAAgRwABADkCCADIEUAAQI4AAgByBBAAkCOAAIAcAQQA5AggACBHAAEAOQIIAMgRQABAjgACAHIEEACQI4AAgBwBBADkCCAAIEcAAQA5AggAyBFAAECOAAIAcgQQAJAjgACAHAEEAOQIIAAgRwABADkCCADIEUAAQI4AAgByBBAAkCOAAIAcAQQA5AggACBHAAEAOQIIAMgRQABAjgACAHIEEACQI4AAgBwBBADkCCAAIEcAAQA5AggAyBFAAECOAAIAcgQQAJAjgACAHAEEAOQIIAAgRwABADkCCADIEUAAQI4AAgByBBAAkCOAAIAcAQQA5AggACBHAAEAOQIIAMgRQABAjgACAHKuRy8AYGnf//jz6CVwiz//+PfoJcD/CSDuxQUFuJTzCDO5XvuAVPzH4HEE1iCKGMUECIBh/HN1THsI29UDaA9/BOa3t5Ok4x5gbiZA7IKgAGBJXgYPAOQIIAAgRwABADkCCADIEUAAQM7fzG4rRjFKV9gAAAAASUVORK5CYII=",ot="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAkAAAAFECAYAAADP44G9AAAAAXNSR0IArs4c6QAABKhJREFUeJzt3SFuG0EUgOHZKiCVGhAaqaQFlmoQGJILxKg4tFJwj1KcAxgXORcwCQxwpQVBlUwLUqlmWxB5NV7Z620by/Xb70N2nEiDVr/eeDIpAQAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAQSLHvBQC7VT3cr7x/++Wx2vS73z+/X3kmFOcXO1oVwH4JIAgsj583d79Wwuf68jillNJoMKx/NilnaTxdpJ9Xr+tngwgCInq17wUAu9GMn2XwpLQ+fvLPbp6qOpaaEySACAQQBLRp8nN9eZzyEGrKg+jr2QcRBIQlgCCwPH7G00WnvxkNhnUI5REEEIkAgqCa217rTMrZ1s+b3x0CiOBo3wsAdmMZP9siqM3zJKg9kgAOkQkQBNQ86p5vazVNylnrJGg0GLYenQc4RAIIAvoxOKtf5+GzKYJSat8Ou/r07mUWBvCfEEAQ2LrgaYsggL4QQEBKSRgB/SKAoIeasSN+gL4RQBDUtqgRPUCfOQYPAZ2W8zQpN193sdQ1grr+E0WAQ2ECBAHlt7pvO+beRX45KkAEAgiC+tOpzTKU/jWWAA6BAIKg8qnNtq2uZvTk7z/Ov5n+AOH4DhAEdntSFH97oemknKXbk0L8ACF5uEFQ1cN9/bpLBDWnQHn8FOcXL7k0gL0TQBBYHkE3T1XVZStsPF2sbJ+JHyAiAQTB5RGU0vNFqfldYbnTcr5ygkz8AAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAsM5vx02eZ10TU0gAAAAASUVORK5CYII=",ht="/assets/3-VChkUrAd.png",ct="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAkAAAAFECAYAAADP44G9AAAAAXNSR0IArs4c6QAADHpJREFUeJzt3dtZ7DYUBtAh36kBWqD/amgBmiAPiRNjxjf5oi3ttR4T4Hhsaeu3rLEeDwAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAI76X2AbTu7fX9e+7/fX59OL8AEJAButBS8JkShAAgFgNzgT3hZyAEAUAcBuWdSsLPQAgCgBgMyDscCT+DIQTN/S0hCQCuZ7Dd6Izws4cgBADXMcjOGAeez6+Pl7sD0PjfrvHvAkDPDK5P1Ao7SwQhADiPQXUiYvgZCEEAcA4D6kjk8DMQggDguL9qHwD7tBDSACA6AQgASMfjlIlWZlg8CgOAcmaAJgQLAOifANSoVmaqACAiAQgASMfjnonWZlY8sgOA/f7UPoDaWgs8AMBxqR+BCT8AkFPaACT8AEBeKdeP9BJ+rP8BgDJpZ4AAgLwEoEaZ/QGAcgJQg4QfADhGAGqM8AMAx6UdTFteCC0EAcAxaWeAhAgAyCttAHo8hCAAyEoA+Fdrj8SENwAol3oGCADISQD6lxkVAMhDAAIA0hGARswCAUAOf2ofQG2tLX4GAI5LO+PRcvAZZqqmn8EMFgBsk3LAbDn8rBGCAGBdusGy5/AzEIIAYFmqgTJD+BkIQQAwL823wDKFHwBgWZoABAAw6Ppr8GZ9AIBnul0nkjn8WP8DAMu6fASWOfwAAOu6C0DCDwCwprsABACwRgDqkFkwAFgmAAEA6XQVgMx8AABbdBWAAAC26OZFiGZ/gB6Ma5l3esF1zAABVPT2+v49hJ7pjZwbO7hON3cXCsVz7iAhrq11Sz+G83XTqQSgZQooxLK3Zi314Wd/S5+HZd10EAFonYIIdR2pU3P9d+lvjn/H2iL46bQ1QMNz7FpBRIcGIruiNq79TWuLYN5qaNhy1xBl+lWnXicowv3Oqk1D/z3770FGizNAW+4a5jpijTCiMwO9c6MH59i1qG7w+fXxEvXbC4rDOkER7hexNqkFZPZ0Bmjrc2UAtokWNqIdD9zNixATEmChjs+vjxfBA2LY/bXKPdY6+pmLpw3qZRRjuF+UejVezqAWkE3RGqA9jr67YosoxaRVCh/cK2rN8t4g9pi249bayaUzQI/HvgXT09/b8nNRC0lrWmu40KIW6tVczVYjGJtryy21k8sD0BFbTmSUY+1BSw0XWtNDrVIjeDzW23Ir7eTXIuhInTTSsWTgfMM1eulbvXwOeDwejz+1DwCgZ0IDLStZ59PKwvofBxexo84tyuM60RsttKS3uqU+5HD2WuCz/taZ/nsEFr2TRj8+gAzU4v6dfY3Hm/LW3DR9qokXIUY5WQCoyey3ZW/Ru/0XgKJOUUU4SQD8pDb36c7rWrsNXf4iRNoTNQxDS7LUUPWiLzXaba02NPstsNIXGAJkpF5CWxbXAEn2AOsyh5/Mn51z1GpD3gPED0PobX2PF7iLAADH3bH33LSvru4ErHMzJgjB/9THf6gLfYjWns9sV88+24/3AEX78MSjnQD0J2JdP+uY5v7O7F5gBjqWaBsAfei5ni99tqdrgHo+GQBHqI8/efzFld5e37+vamNNvAmamAwEZKPNQz8EIIANhJ/fzP7QMgGIQwwKAFzpyDizFNIFIACKuAHqQwszeVeEIAEIYIMWBgko1UL7PjtwC0AAG7UwSECpFtp3SQia+x1bYXBICx0GgG1a3gj92RZOS5+l2Q9KDAIQmaiX89SCvkVu+6WhTQCimIJHNurlMjWhHxnaujVAABtkGBDg8cjT1gUgirjTA+hPlvDzeFgEzU6CD9lkGhCOUBtojQDEJoobGQk/64ba8OwbOHWOCLbxCAzgCeFnm7fX9+9n58r5IzoBiFXu5IASQlB7MtV7AQjgiUwDwZWEoJiGmbtn1ydL2/ceIBZl6QgwR408Rg2JZ0/o6bn9mwECmNFz8SenuTadsa0LQMxy50ZmGQeEKziPcaxdi2zXSgACmMg2EEBGAhAAlxIo2zFcq7kF0j2xCJpFHoORkbp4HTWlDm36NzNAABMG6etkmFmIxvl+TgBikY5DVkLQtdQWahOAAKBTguY8AQiAKgzO1CQAAQDpCECscpdGVtYBXU99oRYBiE0UKbISgmiZ9jtPAAJY8fn18WIggb54ESK7bB0E9uw2DC1QK6+jNlxP+/3NDBCns9swvdF2ryP8XE/7fc4MELusFast7UnBIxI1MBb14Vza9zwBiF2G4nS03ShyRKD+xaQ+nEP7XiYAUY0iR01qX2zqw37a9D7WAAFA44Sf/QQgAGiY8FNGAAJS8ogFchOAqObt9f3bnQs1CUExuS7cQQCiOiGImgy2kJMARAhCEEAZIb6MAEQYQtA2Hh0CHCcAQUPGwWcagoZgJCDt5w6alunvZf7UPgBg3VKBW9t7zeC+zgDSr+m11R8YeBM0oShOv53RR53XeWpgLGe11bXr2kuf0H7LmQGCwBS3Y9bu/p3fWO4KP+Of6SUIsZ8ZIMJQiH46u29mO79z5++sDX3ZZ9z+np37O8PPM632D+24nBkgQmi1+BBTyZop7hOxv68FZvrjW2BUp8BwJgEnnrv6+BXXPnp7Uj/LmQGiKp33t+gFF0qN23ZLff/t9f27peNlGwEIArkq/PRUvH2tuS1za67OCBV33ixEDUFumMpZBE1VEQtKTQLQMvWqP6Vts1ZbiNSX9IdjrAGimkiFJIIri9nc26FbenN0C8fIfiXXVVvgDAIQJDIOO88eSdQ5qnWRj417aQucRQCChNa2zwDiM4t+jEXQVKHjxmWRMbTj8+vDWt5CZoC4nQH1uajnRXHlaq20sbk+Ol5L18qaOgQgbhZ1kGeZgk4UtWrIUvjZ899LCFfXMHXGbYSfbSL3yVrXMPI54Tx72tfdbWJtL7Mtv7fX1h3t9Y8y1gBxm60vErtyo0SAEqUho/QFint2tKeMR2Dcam2TyqXpZJ09LwGYsdZqQWvHm4UZIELYWiDm7qZ6mTVSKGFZhj6S4TNGYAaI2x19Ad/W32+tiEQ/3tqBsva/z/XWZnqj9xHaIgDRpLm3Gc/9HMdECR+fXx8vUY6F6+i33EEAooqtAWbL3zjr52qKfIzRAkfkc8V5XGeuJgABiyINRJGOhev1cr333kREu+nolQAENKGXwZBchJm4BCCqMaABe7QWJkqPV228h6/BAxBSa4Fnahxktn4W4ec+tsKge60U0ah9MdL5i3qOuE7pFhSRLfWpXj5jCzwCo3sKCrTrjG+MRtPLu8taJwCRQvTCEvX4Is3+kFfU/nFEj5+pNdYAAU+dsYGjAAXzSjdK5RxmgIBfztq9+uy7XIMFvTIjdD8BCDjszv2bhCDgDAIQKRg0yw0bVM5tVLkl4KxtcrnX9HraI4xWmfmpx9fg6V4rA2Okvvj59bFaG7b8zNZ/6+jfGIt0HoG4BCC61EroGcvcF49er8znDijjERhdanFAbDG0neXI9WrxWgP1CUAQRPaBvOTzZz9nQDkBiG5tHRyXFvjexUAOcC8BiNSmwaNGEBF+AO7nTdB0bS5cLH2D6c63swo/AHWYASKlteAhmNxvb+h0jYAjBCCYYYC9T+ZvwAF1CECw4MoQJGD9Q/gBahCAYIWgcg3bVwA1CUBAFYIlUJMABDRHeAKOEoCApgg/wBm8BwgKTAdha1nuIfwAZ7EbPGw0hJyllyuu/Q397X/e+wPUJADBRktvjx7/zPS/6WPbzAUi5w+4ggAEJ5oO4vrXPuPz59wBV7IGCC5iAN/POQPu4ltgcAEDOUBsAhCcZG2RNABxCEBwIuEHoA0WQQMA6ZgBAgDSEYAAgHQEIAAgHQEIAEhHAAIA0hGAAIB0BCAAIB0BCABIRwACANIRgACAdAQgACAdAQgASEcAAgDSEYAAgHQEIAAgHQEIAEhHAAIA0hGAAIB0BCAAIB0BCAAa9fn18VL7GFr1N6GpM2tBqRNDAAAAAElFTkSuQmCC";function gt(i){return h.jsx(te,{multiplier:-.008,...i,layers:[{image:at,multiplier:1},{image:ot,multiplier:.5},{image:ht,multiplier:.4},{image:ct,multiplier:.25}]})}const YA="solid",WA="magic dust",LA={solid:Qe,liquid:Re,gas:ze,static:we,effect:Ie};function ft(){const i=new c(320,192),r=E.useRef(null),A=E.useRef(void 0),[e,s]=be(),[n,u]=vA(!1),[l,C]=vA([0,0]),[B,p]=vA(WA),[M,K]=E.useState(!1),[T,BA]=E.useState(!0),[tA,CA]=E.useState([0]),[bA,se]=E.useState(!1),[ie,re]=E.useState(void 0),[ne,ae]=E.useState({}),[fA,mA]=E.useState(YA),[pA,FA]=E.useState({[fA||YA]:B.current});E.useEffect(()=>{const f=r.current;f&&(T?f.start():f.stop())},[T]);function oe(){const f=new At({gridOptions:{size:i}}),d=Object.values(f.materialPalette).map(g=>g()),Q={solid:S.chain(d).filter(g=>g instanceof O).map(g=>g.name).value(),liquid:S.chain(d).filter(g=>g instanceof G).map(g=>g.name).value(),gas:S.chain(d).filter(g=>g instanceof dA).map(g=>g.name).value(),static:S.chain(d).filter(g=>g instanceof eA).map(g=>g.name).value(),effect:S.chain(d).filter(g=>g instanceof SA).map(g=>g.name).value()};return ae(Q),FA(g=>({...g,...S.chain(Q).toPairs().map(([x,y])=>{if(!S.has(g,x))return[x,S.first(y)]}).compact().fromPairs().value()})),f}function he(f){var q;const{width:d,height:Q}=s,g=[f.clientX/d,f.clientY/Q];C(g);const x=(q=r.current)==null?void 0:q.simulation;if(!x)return;const y=x.grid.getAtPosition(c.fromArray(g).multiply(x.grid.size).floor());y&&re(y.empty?void 0:y.name)}function ce(f){const{grid:d,deltaTime:Q}=f;ue(d),CA(g=>[...g.slice(g.length-100),1/Q])}function ge(){u(!0)}function RA(){u(!1),A.current=void 0}function ue(f){var GA;if(!n.current||!B.current)return;const d=c.fromArray(l.current).multiply(f.size).floor(),Q=(GA=r.current)==null?void 0:GA.simulation;if(!Q)return;const x=Q.materialPalette[B.current];if(!x)return;const y=x(),q=Math.floor(y.brushSize/2);(A.current?f.getPositionsInLine(A.current,d):[d]).every(zA=>{for(let EA=-q;EA<y.brushSize;EA++)for(let QA=-q;QA<y.brushSize;QA++){if(Math.random()>y.brushFillRate)continue;const HA=zA.x+QA;if(HA<0)continue;const PA=zA.y+EA;PA<0||f.setAtPosition(new c(HA,PA),x())}return!0}),A.current=d}function le(){const f=r.current;f&&f.restart()}function de(){var d;if((d=r.current)!=null&&d.simulation)return{transform:`translate(${c.fromArray(l.current).multiply(c.fromArray([s.width,s.height])).add(c.fromArray([15,-4])).toArray().map(Q=>Q+"px").join(", ")})`}}return h.jsxs("div",{className:"route sand",children:[h.jsxs("div",{className:"toolbar",children:[h.jsxs("div",{className:"panel controls",children:[h.jsx("button",{onClick:()=>BA(f=>!f),children:T?h.jsxs(h.Fragment,{children:[h.jsx(fe,{}),"stop"]}):h.jsxs(h.Fragment,{children:[h.jsx(me,{}),"start"]})}),h.jsxs("button",{onClick:()=>le(),children:[h.jsx(pe,{}),"reset"]})]}),h.jsxs("div",{className:"panel materials",children:[h.jsx("div",{className:`material${B.current==="empty"?" selected":""}`,children:h.jsxs(h.Fragment,{children:[h.jsx(Ee,{}),"remove"]}),onClick:()=>{mA(void 0),p("empty")}}),h.jsx("div",{className:"separator"}),S.map(ne,(f,d)=>h.jsx(NA,{trigger:h.jsxs("div",{className:`material${fA===d?" selected":""}`,onClick:()=>{pA[d]&&(mA(d),p(pA[d]||WA))},children:[LA[d]?LA[d]({}):h.jsx(Fe,{}),h.jsx("div",{children:fA===d&&pA[d]||d})]}),children:S.map(f,Q=>h.jsx("div",{className:`material${B.current===Q?" selected":""}`,children:Q,onClick:()=>{mA(d),p(Q),FA(g=>({...g,[d]:Q}))}},Q))},d))]}),h.jsxs("div",{className:"panel config",children:[h.jsxs(NA,{trigger:h.jsxs("div",{className:"material",children:[h.jsx(Ge,{}),"config"]}),children:[h.jsx(UA,{id:"isDay",checked:bA,onChange:se}),h.jsx(UA,{id:"debugDraw",checked:M,onChange:K})]}),h.jsx("div",{className:"separator"}),h.jsxs("div",{style:{width:"60px",whiteSpace:"nowrap"},children:["fps: ",Math.round(tA.reduce((f,d)=>f+d)/tA.length||1)]})]})]}),h.jsxs("div",{className:"content",ref:e,children:[M?h.jsx("div",{className:"debug-draw-background"}):bA?h.jsx(nt,{style:{opacity:.6,filter:"blur(4px)"}}):h.jsx(gt,{}),h.jsx(ye,{ref:r,renderOptions:{debugDraw:M},pickColor:({cell:f})=>M&&!f.isSleeping()?[255,255,255,255]:f.getRGBA(),initSimulation:oe,onStep:ce,onMouseDown:ge,onMouseUp:RA,onMouseLeave:RA,onMouseMove:he})]}),h.jsx("div",{className:"pointer-info-text",style:de(),children:ie})]})}export{ft as default};
