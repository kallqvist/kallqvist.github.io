var R=Object.defineProperty;var G=(s,e,t)=>e in s?R(s,e,{enumerable:!0,configurable:!0,writable:!0,value:t}):s[e]=t;var x=(s,e,t)=>(G(s,typeof e!="symbol"?e+"":e,t),t),l=(s,e,t)=>{if(!e.has(s))throw TypeError("Cannot "+t)};var n=(s,e,t)=>(l(s,e,"read from private field"),t?t.call(s):e.get(s)),c=(s,e,t)=>{if(e.has(s))throw TypeError("Cannot add the same private member more than once");e instanceof WeakSet?e.add(s):e.set(s,t)},m=(s,e,t,i)=>(l(s,e,"write to private field"),i?i.call(s,t):e.set(s,t),t);var w=(s,e,t)=>(l(s,e,"access private method"),t);import{r as g,j as a,l as C,m as b}from"./index-VB6cm0Bi.js";import{a as E,n as v,G as y,u as M,b as z}from"./index-0xSaKzvX.js";class f extends y{constructor(t,i){super(t);x(this,"wall");this.wall=i||!1}getRGBA(){return this.wall?[255,0,100,255]:[0,0,0,0]}}var r,h,j;class k{constructor(e){c(this,h);c(this,r,void 0);m(this,r,new E({...e,createEmpty:t=>new f(t)})),this.restart()}getGrid(){return n(this,r)}restart(){n(this,r).forEach(e=>{n(this,r).set(e.position,new f(n(this,r),Math.random()<.3))})}step(e){const t=n(this,r).map(i=>i.wall);n(this,r).forEach(i=>{let u=w(this,h,j).call(this,t,i);i.wall!==u&&n(this,r).setAtIndex(i.index,new f(n(this,r),u))})}}r=new WeakMap,h=new WeakSet,j=function(e,t){let i=0;return t.position.x===0||t.position.x===n(this,r).width-1||t.position.y===0||t.position.y===n(this,r).height-1||(v.forEach(u=>{const d=n(this,r).position2index(t.position.add(u));e[d]===!0&&i++}),i<4)?!0:i>4?!1:t.wall};function A(){const t=g.useRef(),[i,u]=M(void 0);g.useEffect(()=>{t.current=new k({width:160,height:90}),u(t.current.getGrid()),p()},[]);function d(o){o.preventDefault()}function p(){const o=t.current;o&&o.restart()}return a.jsxs("div",{className:"route maze",children:[a.jsxs("div",{style:{position:"absolute",top:0,width:"100%",display:"flex",justifyContent:"center",background:"black",color:"white",zIndex:100},children:[a.jsxs("button",{onClick:()=>{var o;return(o=t.current)==null?void 0:o.step(1)},children:[a.jsx(C,{}),"step"]}),a.jsxs("button",{onClick:()=>p(),children:[a.jsx(b,{}),"reset"]})]}),a.jsx(z,{grid:i.current,onContextMenu:d})]})}export{A as default};
