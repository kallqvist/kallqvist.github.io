{"version":3,"file":"static/js/338.952af9d8.chunk.js","mappings":"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","sources":["components/eye/index.tsx","routes/eyes/index.tsx"],"sourcesContent":["import React, { useRef, useState, useEffect } from \"react\";\r\nimport _ from \"lodash\";\r\nimport { useGesture } from \"@use-gesture/react\";\r\nimport { useSpring, animated } from \"react-spring\";\r\nimport photo from './photo.png';\r\nimport './style.css';\r\n\r\n\r\nexport type EyeEmotions = 'angry' | 'sad' | 'happy' | 'surprised';\r\n\r\nexport interface IEyeProps extends IEyesProps\r\n{\r\n    side?: 'left' | 'right',\r\n}\r\n\r\nexport interface IEyesProps\r\n{\r\n    emotion?: EyeEmotions,\r\n    followCursor?: boolean,\r\n    lookAngle?: number,\r\n    lookDistance?: number,\r\n    maxLookDistance?: number,\r\n    eyeRotation?: number,\r\n    irisSize?: number,\r\n    pupilSize?: number,\r\n    style?: React.CSSProperties,\r\n    irisStyle?: React.CSSProperties,\r\n    pupilStyle?: React.CSSProperties,\r\n}\r\n\r\nexport function Eye(props:IEyeProps)\r\n{\r\n    const {\r\n        side,\r\n        emotion,\r\n        followCursor,\r\n        lookAngle,\r\n        lookDistance,\r\n        maxLookDistance,\r\n        eyeRotation,\r\n        irisSize,\r\n        pupilSize,\r\n        style,\r\n        irisStyle,\r\n        pupilStyle,\r\n    } = {\r\n        side: 'left',\r\n        lookDistance: 0,\r\n        maxLookDistance: 1,\r\n        irisSize: 0.6,\r\n        pupilSize: 0.25,\r\n        ...props,\r\n    };\r\n\r\n    const [currentLookAngle, setCurrentLookAngle] = useState(lookAngle);\r\n    const [currentLookDistance, setCurrentLookDistance] = useState(lookDistance);\r\n\r\n    const animConfig = { mass: 0.4, tension: 100, friction: 6 };\r\n\r\n    const [eyeAnimation] = useSpring({\r\n        config: animConfig,\r\n        transform: `rotate(${currentLookAngle || 0}deg)`,\r\n    }, [currentLookAngle]);\r\n\r\n    const [irisAnimation] = useSpring({\r\n        config: animConfig,\r\n        transform: `translate3d(0, ${(-currentLookDistance + irisSize * currentLookDistance) * 100}%, 0) scale3d(1, ${30 - (currentLookDistance || 0) * 30 + 70}%, 1)`,\r\n        top: `calc(50% - ${irisSize * 100}% / 2)`,\r\n        left: `calc(50% - ${irisSize * 100}% / 2)`,\r\n        width: `${irisSize * 100}%`,\r\n        height: `${irisSize * 100}%`,\r\n    }, [currentLookAngle, currentLookDistance, irisSize]);\r\n\r\n    const [pupilAnimation] = useSpring({\r\n        config: animConfig,\r\n        transform: `translate3d(0, ${(-currentLookDistance + pupilSize * currentLookDistance) * 100}%, 0) scale3d(1, ${30 - (currentLookDistance || 0) * 30 + 70}%, 1)`,\r\n        top: `calc(50% - ${pupilSize * 100}% / 2)`,\r\n        left: `calc(50% - ${pupilSize * 100}% / 2)`,\r\n        width: `${pupilSize * 100}%`,\r\n        height: `${pupilSize * 100}%`,\r\n    }, [currentLookAngle, currentLookDistance, pupilSize]);\r\n\r\n    const ref = useRef<HTMLDivElement>(null);\r\n\r\n    useGesture({\r\n        onMouseMove: ({event}) => {\r\n            if (!followCursor) return;\r\n            const bounds = ref.current?.getBoundingClientRect();\r\n            if (!bounds) return;\r\n            const cx = bounds.x + bounds.width / 2;\r\n            const cy = bounds.y + bounds.height / 2;\r\n            const x = event.clientX - cx;\r\n            const y = event.clientY - cy;\r\n            var rad = Math.atan2(y, x);\r\n            var rot = rad / Math.PI * 180 + 90;\r\n            let dist = Math.min(vectorDistance([cx, cy], [event.clientX, event.clientY]) / (bounds.width / 2), maxLookDistance || 1);\r\n            if (eyeRotation !== undefined) rot -= eyeRotation;\r\n            setCurrentLookDistance(dist);\r\n            setCurrentLookAngle(prev => {\r\n                let rotDist = rot - (prev || 0) % 360;\r\n                if (rotDist < -180) rotDist += 360;\r\n                if (rotDist > 180) rotDist -= 360;\r\n                let res = (prev || 0) + rotDist;\r\n                return res;\r\n            });\r\n        },\r\n    }, {\r\n        target: window,\r\n    });\r\n\r\n    useEffect(() => {\r\n        if (followCursor) return;\r\n        let a = lookAngle;\r\n        let d = lookDistance;\r\n        if (a !== undefined) {\r\n            if (!d) d = maxLookDistance;\r\n            if (eyeRotation !== undefined) a -= eyeRotation;\r\n        }\r\n        d = Math.min(lookDistance, maxLookDistance);\r\n        setCurrentLookAngle(a);\r\n        setCurrentLookDistance(d);\r\n    }, [\r\n        lookAngle,\r\n        lookDistance,\r\n        followCursor,\r\n    ])\r\n\r\n    function vectorDistance(x:number[], y:number[]) : number\r\n    {\r\n        return Math.sqrt(x.reduce((acc, val, i) => acc + Math.pow(val - y[i], 2), 0));\r\n    }\r\n\r\n    const classNames = (\r\n        _.chain([\r\n            'eye',\r\n            side,\r\n            emotion,\r\n        ])\r\n        .compact()\r\n        .join(' ')\r\n        .value()\r\n    );\r\n\r\n    return <div className={classNames} ref={ref} style={{\r\n        ...(eyeRotation !== undefined ? {\r\n            transform: `rotate(${eyeRotation}deg)`,\r\n        } : undefined),\r\n        ...style,\r\n    }}>\r\n        <animated.div className='inner' style={eyeAnimation}>\r\n            <animated.div className='iris' style={{\r\n                ...irisStyle,\r\n                ...irisAnimation,\r\n            }} />\r\n            <animated.div className='pupil' style={{\r\n                ...pupilStyle,\r\n                ...pupilAnimation,\r\n            }} />\r\n        </animated.div>\r\n        <div className='highlight' />\r\n        {/* <div className='debug'>{currentLookAngle?.toFixed(2)}</div> */}\r\n    </div>\r\n}\r\n\r\nexport function Eyes(props:IEyesProps)\r\n{\r\n    return <div className='eyes'>\r\n        <Eye {...props} side='left' />\r\n        <Eye {...props} side='right' />\r\n    </div>\r\n}\r\n\r\nexport function EyesPhoto()\r\n{\r\n    return <div className='eyes' style={{\r\n        width: '500px',\r\n        height: '300px',\r\n        backgroundImage: `url(${photo})`,\r\n        backgroundPosition: 'top center',\r\n        backgroundSize: 'cover',\r\n    }}>\r\n        <Eye followCursor\r\n            emotion='sad'\r\n            eyeRotation={-10}\r\n            pupilSize={0.45}\r\n            style={{\r\n                position: 'absolute',\r\n                top: '39%',\r\n                left: '34%',\r\n                width: '30px',\r\n                height: '30px',\r\n            }}\r\n            irisStyle={{\r\n                background: 'brown',\r\n            }}\r\n        />\r\n        <Eye followCursor\r\n            emotion='sad'\r\n            side='right'\r\n            eyeRotation={-10}\r\n            irisSize={0.5}\r\n            pupilSize={0.3}\r\n            style={{\r\n                position: 'absolute',\r\n                top: '37%',\r\n                left: '41%',\r\n                width: '30px',\r\n                height: '30px',\r\n            }}\r\n            irisStyle={{\r\n                background: 'brown',\r\n            }}\r\n        />\r\n\r\n        <Eye followCursor\r\n            eyeRotation={10}\r\n            style={{\r\n                position: 'absolute',\r\n                top: '29%',\r\n                left: '53%',\r\n                width: '30px',\r\n                height: '30px',\r\n            }}\r\n        />\r\n        <Eye followCursor\r\n            side='right'\r\n            eyeRotation={10}\r\n            style={{\r\n                position: 'absolute',\r\n                top: '31%',\r\n                left: '62%',\r\n                width: '30px',\r\n                height: '30px',\r\n            }}\r\n        />\r\n    </div>\r\n}\r\n","import { Eyes, EyesPhoto } from \"../../components/eye\";\r\nimport './style.css';\r\n\r\n\r\nexport default function RouteEyes()\r\n{\r\n\treturn <div className='route eyes'>\r\n\t\t<div>\r\n\t\t\t<Eyes followCursor emotion='sad' pupilSize={0.3} />\r\n\t\t\t<Eyes followCursor irisStyle={{background: 'green'}} />\r\n\t\t\t<Eyes followCursor emotion='happy' pupilSize={0.45} irisStyle={{background: 'purple'}} />\r\n\t\t\t<Eyes\r\n\t\t\t\tfollowCursor\r\n\t\t\t\temotion='angry'\r\n\t\t\t\tirisSize={0.4}\r\n\t\t\t\tpupilSize={0.2}\r\n\t\t\t\tirisStyle={{\r\n\t\t\t\t\tbackground: 'black',\r\n\t\t\t\t\topacity: 0.8,\r\n\t\t\t\t}}\r\n\t\t\t\tpupilStyle={{\r\n\t\t\t\t\tbackground: 'red',\r\n\t\t\t\t\tborder: '1px solid rgba(0, 0, 0, 0.8)',\r\n\t\t\t\t}}\r\n\t\t\t/>\r\n\t\t\t<Eyes followCursor emotion='surprised' irisStyle={{background: 'brown'}} />\r\n\t\t</div>\r\n\t\t<EyesPhoto />\r\n\t</div>;\r\n}\r\n"],"names":["Eye","props","side","lookDistance","maxLookDistance","irisSize","pupilSize","emotion","followCursor","lookAngle","eyeRotation","style","irisStyle","pupilStyle","useState","currentLookAngle","setCurrentLookAngle","currentLookDistance","setCurrentLookDistance","animConfig","mass","tension","friction","useSpring","config","transform","eyeAnimation","top","left","width","height","irisAnimation","pupilAnimation","ref","useRef","useGesture","onMouseMove","event","bounds","current","getBoundingClientRect","cx","x","cy","y","clientX","clientY","rot","Math","atan2","PI","dist","min","sqrt","reduce","acc","val","i","pow","vectorDistance","undefined","prev","rotDist","target","window","useEffect","a","d","classNames","_","compact","join","value","className","animated","Eyes","EyesPhoto","backgroundImage","photo","backgroundPosition","backgroundSize","position","background","RouteEyes","opacity","border"],"sourceRoot":""}