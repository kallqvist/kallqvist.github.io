var I=Object.defineProperty;var z=(s,t,n)=>t in s?I(s,t,{enumerable:!0,configurable:!0,writable:!0,value:n}):s[t]=n;var m=(s,t,n)=>(z(s,typeof t!="symbol"?t+"":t,n),n),O=(s,t,n)=>{if(!t.has(s))throw TypeError("Cannot "+n)};var h=(s,t,n)=>(O(s,t,"read from private field"),n?n.call(s):t.get(s)),x=(s,t,n)=>{if(t.has(s))throw TypeError("Cannot add the same private member more than once");t instanceof WeakSet?t.add(s):t.set(s,n)};import{r as c,j as i,F as B,l as D,t as U,m as V}from"./index-DXWUy1KW.js";import{G as L,S as N,b as T,u as g,a as X,V as o}from"./index-6_PlFzf0.js";import"./react-spring_web.modern-CMtpY8LM.js";var u;class f extends L{constructor(){super(...arguments);m(this,"age",0);x(this,u,30)}step(n){this.age+=n,this.age>h(this,u)&&this.grid.setAtIndex(this.index,this.grid.createEmpty())}getRGBA(){return[255,0,100,255-Math.min(this.age/h(this,u)*255,255)]}}u=new WeakMap;class Y extends N{createGrid(t){return new T({...t,createEmpty:n=>new f(n)})}step(t){this.grid.forEach(n=>{n.step(t)})}}function Q(){const s=new o(160,90),t=c.useRef(null),n=c.useRef(void 0),[l,j]=c.useState(!0),[w,S]=g(void 0),[d,C]=g(new o(0,0));c.useEffect(()=>{const e=t.current;e&&(l?e.start():e.stop())},[l]);function F(){const e=new Y({gridOptions:{size:s}}),r=e.grid;return r.set(new o(3,3),new f(r)),e}function M(e){e.preventDefault()}function R(){S(void 0),n.current=void 0}function b(e){const r=e.target,{x:a,y:p,width:A,height:E}=r.getBoundingClientRect(),k=new o(a,p),G=new o(A,E);C(new o(e.clientX,e.clientY).subtract(k).divide(G).multiply(s).floor())}function v({grid:e}){y(e)}function y(e){if(w.current===void 0)return;(n.current?e.getPositionsInLine(n.current,d.current):[d.current]).forEach(a=>{e.get(a)&&e.set(a,new f(e))}),n.current=d.current}function P(){var e;(e=t.current)==null||e.clear()}return i.jsxs("div",{className:"route fluid",children:[i.jsxs("div",{style:{position:"absolute",top:0,width:"100%",display:"flex",justifyContent:"center",background:"black",color:"white",zIndex:100},children:[i.jsx("button",{onClick:()=>j(e=>!e),children:l?i.jsxs(i.Fragment,{children:[i.jsx(B,{}),"stop"]}):i.jsxs(i.Fragment,{children:[i.jsx(D,{}),"start"]})}),i.jsxs("button",{onClick:()=>{var e;return(e=t.current)==null?void 0:e.step(1)},children:[i.jsx(U,{}),"step"]}),i.jsxs("button",{onClick:()=>P(),children:[i.jsx(V,{}),"reset"]})]}),i.jsx(X,{ref:t,initSimulation:F,onStep:v,onMouseUp:R,onMouseMove:b,onContextMenu:M})]})}export{Q as default};
