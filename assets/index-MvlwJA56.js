var U=Object.defineProperty;var V=(s,t,i)=>t in s?U(s,t,{enumerable:!0,configurable:!0,writable:!0,value:i}):s[t]=i;var P=(s,t,i)=>(V(s,typeof t!="symbol"?t+"":t,i),i),X=(s,t,i)=>{if(!t.has(s))throw TypeError("Cannot "+i)};var C=(s,t,i)=>{if(t.has(s))throw TypeError("Cannot add the same private member more than once");t instanceof WeakSet?t.add(s):t.set(s,i)};var M=(s,t,i)=>(X(s,t,"access private method"),i);import{r as m,j as r,F as Y,l as T,s as _,m as q}from"./index-yvgX-7gA.js";import{G as H,S as J,b as K,n as Q,u as R,a as W,V as n}from"./index-Odt15Tot.js";import"./react-spring_web.modern-3aA2RvZl.js";class x extends H{constructor(i,o){super(i);P(this,"alive",!1);this.alive=o||!1}getRGBA(){return this.alive?[255,0,0,255]:[0,0,0,0]}}var v,F;class Z extends J{constructor(){super(...arguments);C(this,v)}createGrid(i){return new K({...i,createEmpty:o=>new x(o)})}step(){const i=this.grid.map(o=>o.alive);this.grid.forEach(o=>{let a=M(this,v,F).call(this,i,o);o.alive!==a&&this.grid.setAtIndex(o.index,new x(this.grid,a))})}}v=new WeakSet,F=function(i,o){let a=0;return Q.forEach(h=>{if(!o.position)return;const b=this.grid.position2index(o.position.add(h));i[b]===!0&&a++}),o.alive&&(a<2||a>3)?!1:!o.alive&&a===3?!0:o.alive};function ie(){const s=new n(160,90),t=m.useRef(),i=m.useRef(void 0),[o,a]=R(void 0),[h,b]=R(new n(0,0)),[S,G]=m.useState(!0);m.useEffect(()=>{const e=t.current;e&&(S?e.start():e.stop())},[S]);function A(){const e=new Z({gridOptions:{size:s}});return D(e.grid),e}function D(e){const u={glider:`01
                001
                111`,grabbyEdge:`001
                001
                011
                0
                1100111
                10101
                011
                0
                011
                10101
                1100111
                0
                011
                001
                001`};function c(l,w){l.trim().split(`
`).forEach((d,j)=>{d=d.trim();for(let f=0;f<d.length;f++)Number.parseInt(d[f])!==0&&e.set(new n(f,j).add(w),new x(e,!0))})}[new n(0,5),new n(0,26),new n(0,47),new n(0,68)].forEach(l=>{c(u.grabbyEdge,l)}),[new n(30,20),new n(30,30),new n(30,40),new n(30,50),new n(30,60),new n(40,20),new n(40,30),new n(40,40),new n(40,50),new n(40,60),new n(50,20),new n(50,30),new n(50,40),new n(50,50),new n(50,60)].forEach(l=>{c(u.glider,l)})}function I(e){e.preventDefault()}function O(e){var E;const u=(E=t.current)==null?void 0:E.simulation;if(!u)return;const c=e.target,{x:p,y:g,width:l,height:w}=c.getBoundingClientRect(),d=new n(p,g),j=new n(l,w),f=new n(e.clientX,e.clientY).subtract(d).divide(j).multiply(s).floor(),y=u.grid.get(f);y&&a(y.alive?"erase":"add")}function k(){a(void 0),i.current=void 0}function z(e){const u=e.target,{x:c,y:p,width:g,height:l}=u.getBoundingClientRect(),w=new n(c,p),d=new n(g,l);b(new n(e.clientX,e.clientY).subtract(w).divide(d).multiply(s).floor())}function L(e){const{grid:u}=e;B(u)}function B(e){if(o.current===void 0)return;(i.current?e.getPositionsInLine(i.current,h.current):[h.current]).forEach(c=>{e.get(c)&&e.set(c,new x(e,o.current==="add"))}),i.current=h.current}function N(){const e=t.current;e&&e.restart()}return r.jsxs("div",{className:"route game-of-life",children:[r.jsxs("div",{style:{position:"absolute",top:0,width:"100%",display:"flex",justifyContent:"center",background:"black",color:"white",zIndex:100},children:[r.jsx("button",{onClick:()=>G(e=>!e),children:S?r.jsxs(r.Fragment,{children:[r.jsx(Y,{}),"stop"]}):r.jsxs(r.Fragment,{children:[r.jsx(T,{}),"start"]})}),r.jsxs("button",{onClick:()=>{var e;return(e=t.current)==null?void 0:e.step(Date.now())},children:[r.jsx(_,{}),"step"]}),r.jsxs("button",{onClick:()=>N(),children:[r.jsx(q,{}),"reset"]})]}),r.jsx(W,{ref:t,limitFps:12,initSimulation:A,onStep:L,onMouseDown:O,onMouseUp:k,onMouseMove:z,onContextMenu:I})]})}export{ie as default};
