var le=Object.defineProperty;var Be=(r,s,A)=>s in r?le(r,s,{enumerable:!0,configurable:!0,writable:!0,value:A}):r[s]=A;var t=(r,s,A)=>(Be(r,typeof s!="symbol"?s+"":s,A),A),xA=(r,s,A)=>{if(!s.has(r))throw TypeError("Cannot "+A)};var a=(r,s,A)=>(xA(r,s,"read from private field"),A?A.call(r):s.get(r)),l=(r,s,A)=>{if(s.has(r))throw TypeError("Cannot add the same private member more than once");s instanceof WeakSet?s.add(r):s.set(r,A)},Q=(r,s,A,e)=>(xA(r,s,"write to private field"),e?e.call(r,A):s.set(r,A),A);var rA=(r,s,A,e)=>({set _(i){Q(r,s,i,A)},get _(){return a(r,s,e)}}),b=(r,s,A)=>(xA(r,s,"access private method"),A);import{r as I,i as JA,j as u,F as Ce,_ as v,l as fe,m as pe,n as Ee,o as me}from"./index-djtg_nrC.js";import{G as Qe,V as h,B,r as o,a as T,S as Ie,C as we,u as yA,b as De,c as ve,d as xe}from"./index-WW1vL-Y_.js";import{u as ye,a as Oe}from"./react-spring_web.modern-UGADNBnE.js";var ke=function(){},TA=typeof window<"u",Se=TA?I.useLayoutEffect:I.useEffect,KA={x:0,y:0,width:0,height:0,top:0,left:0,bottom:0,right:0};function Me(){var r=I.useState(null),s=r[0],A=r[1],e=I.useState(KA),i=e[0],n=e[1],d=I.useMemo(function(){return new window.ResizeObserver(function(p){if(p[0]){var E=p[0].contentRect,C=E.x,F=E.y,sA=E.width,BA=E.height,CA=E.top,fA=E.left,pA=E.bottom,EA=E.right;n({x:C,y:F,width:sA,height:BA,top:CA,left:fA,bottom:pA,right:EA})}})},[]);return Se(function(){if(s)return d.observe(s),function(){d.disconnect()}},[s]),[A,i]}const be=TA&&typeof window.ResizeObserver<"u"?Me:function(){return[ke,KA]};function je(r){return JA({tag:"svg",attr:{version:"1.2",baseProfile:"tiny",viewBox:"0 0 24 24"},child:[{tag:"path",attr:{d:"M20.177 3.823c-.382-.383-.894-.586-1.415-.586-.25 0-.503.047-.744.144-4.449 1.787-7.792 4.76-10.517 9.357-.102.172-.163.355-.209.542-1.38.215-2.6.903-3.442 1.993-.916 1.185-1.295 2.695-1.066 4.254l.216 1.473 1.473.217c.293.043.589.064.88.064 2.743 0 4.949-1.909 5.367-4.564.188-.047.371-.115.544-.218 4.598-2.728 7.571-6.069 9.355-10.517.298-.743.123-1.593-.442-2.159zm-14.824 15.458c-.192 0-.389-.016-.59-.044-.309-2.104 1.055-3.81 3-4.021l1.021 1.021c-.192 1.76-1.605 3.044-3.431 3.044zm4.89-4.502l-1.021-1.021c.38-.641.774-1.233 1.178-1.804.027.041 1.639 1.653 1.639 1.653-.568.401-1.158.794-1.796 1.172zm2.608-1.773s-1.821-1.801-1.879-1.824c2.147-2.784 4.651-4.685 7.791-5.943-1.255 3.127-3.144 5.623-5.912 7.767z"},child:[]}]})(r)}function Re(r){return JA({tag:"svg",attr:{viewBox:"0 0 512 512"},child:[{tag:"path",attr:{d:"M236 96c-70 0-127.8 59.7-127.8 130.8 0 4.3.3 8.6.8 12.8-43.2 3.9-77 44-77 88.4 0 47 37.9 88 84.6 88h257.8c58.3 0 105.6-49.4 105.6-108s-47.3-108.8-105.6-108.8c-2.3 0-4.8-.2-7.2-.2-2.1 0-4.2 0-6.1.1C349.3 145.6 306 96 236 96z"},child:[]}]})(r)}var j,G,N,x,R,aA,qA,oA,ZA;class cA extends Qe{constructor(A,e){super(A);l(this,aA);l(this,oA);t(this,"shouldTryAwakeNeighbours");t(this,"empty");t(this,"color");t(this,"index",-1);t(this,"position",h.zero.clone());t(this,"age",0);t(this,"brushSize",4);t(this,"brushFillRate",.05);t(this,"acceleration",h.zero.clone());l(this,j,h.zero.clone());l(this,G,!1);l(this,N,{});l(this,x,void 0);l(this,R,void 0);const{empty:i,shouldTryAwakeNeighbours:n,behaviors:d,conditionalBehaviors:p}={empty:!1,shouldTryAwakeNeighbours:!0,behaviors:[],conditionalBehaviors:[],...e};this.empty=i,this.shouldTryAwakeNeighbours=n,this.color=this.getRGBA(),Q(this,x,d),Q(this,R,new Set(p))}get velocity(){return a(this,j)}get behaviors(){return a(this,x)}get isSleeping(){return a(this,G)}sleep(){this.isSleeping||(Q(this,G,!0),this.grid.registerChanged(this))}awake(){this.isSleeping&&(Q(this,G,!1),this.grid.registerChanged(this))}die(){this.grid.set(this.position,this.grid.createEmpty())}getRGBA(){return this.color}hasBehaviorOfType(A){return this.hasBehaviorOfName(A.name)}hasBehaviorOfName(A){return a(this,N)[A]!==void 0}getBehaviorOfType(A){return this.getBehaviorOfName(A.name)}getBehaviorOfName(A){return a(this,N)[A]}removeBehaviorOfType(A){if(!this.hasBehaviorOfType(A))return;if(!this.getBehaviorOfName(A.name))throw new Error("Behavior doesn't exist");Q(this,x,a(this,x).filter(i=>!(i instanceof A)))}removeBehaviorOfName(A){if(!this.hasBehaviorOfName(A))return;const e=this.getBehaviorOfName(A);if(!e)throw new Error("Behavior doesn't exist");Q(this,x,a(this,x).filter(i=>i!==e))}addDelayedBehaviors(A,...e){A()?this.addBehaviors(...e):a(this,R).add([A,e])}addBehaviors(...A){A.forEach(e=>{this.hasBehaviorOfType(e.constructor)||(a(this,x).push(e),b(this,aA,qA).call(this,e))})}swapWith(A){super.swapWith(A),this.awake(),A.awake()}step(A){this.age+=A,a(this,R).size>0&&b(this,oA,ZA).call(this),a(this,x).forEach(i=>{i.step({deltaTime:A,cell:this,grid:this.grid})}),a(this,j).add(this.acceleration);let e=this;this.getLineTo(h.add(this.position,a(this,j)),{excludeStart:!0}).every(i=>i.empty?(e=i,!0):(a(this,j).multiplyScalar(0),!1)),e!==this&&this.swapWith(e),a(this,G)||this.grid.registerChanged(this),this.acceleration.multiplyScalar(0),a(this,j).multiplyScalar(.99)}}j=new WeakMap,G=new WeakMap,N=new WeakMap,x=new WeakMap,R=new WeakMap,aA=new WeakSet,qA=function(A){const e=A.constructor.name;a(this,N)[e]=A},oA=new WeakSet,ZA=function(){a(this,R).forEach(A=>{const[e,i]=A;e()&&(a(this,R).delete(A),this.addBehaviors(...i))})};class Fe extends B{constructor(A,e=3,i=5,n=.005){super();t(this,"spawn");t(this,"breedMinAge");t(this,"breedMaxAge");t(this,"breedChance");this.spawn=A,this.breedMinAge=e,this.breedMaxAge=i,this.breedChance=n}step({cell:A,grid:e}){if(A.isSleeping||A.age<this.breedMinAge||A.age>this.breedMaxAge||o()>this.breedChance)return;const i=A.dir.S();i&&i.constructor.prototype===A.constructor.prototype&&(i.age<this.breedMinAge||i.age>this.breedMaxAge||A.getNeighbourhood().every(n=>n!=null&&n.empty?(e.setAtIndex(n.index,this.spawn()),!1):!0))}}class eA extends B{constructor(A=1){super();t(this,"sinkChance");this.sinkChance=A}step({cell:A}){if(A.isSleeping||o()>this.sinkChance)return;const e=A.dir.S();if(e instanceof S){A.swapWith(e);return}const i=[-1,1];o()>=.5&&i.reverse(),i.every(n=>{const d=A.getNeighbourInDirection(h.create(n,1));return d instanceof S?(A.swapWith(d),!1):!0})}}class Ge extends B{constructor(A=1){super();t(this,"floatChance");this.floatChance=A}step({cell:A}){if(o()>this.floatChance)return;const e=A.dir.N();e instanceof S&&A.swapWith(e)}}class He extends B{step(){}}var K;class VA extends B{constructor(A=h.down,e=.1){super();t(this,"corrodeDirection");t(this,"corrodeChance");l(this,K,40);this.corrodeDirection=A,this.corrodeChance=e}step({cell:A}){if(o()>this.corrodeChance)return;const e=[-1,0,1];o()>=.5&&e.reverse();const i=e.map(n=>A.getNeighbourInDirection(h.create(n,this.corrodeDirection.y))).filter(n=>n&&!n.hasBehaviorOfType(He));if(i.length>0){const n=i[Math.floor(o()*i.length)];if(!n)return;n.die(),rA(this,K)._--,a(this,K)<=0&&A.die()}}}K=new WeakMap;class gA extends cA{}class M extends gA{constructor(s,A){super(s,A),this.addBehaviors(new T)}}class ze extends B{constructor(A=.05){super();t(this,"digChance");this.digChance=A}step({cell:A}){if(o()>this.digChance)return;const e=A.getNeighbourhood().filter(i=>i&&!(i!=null&&i.empty)&&i instanceof M);if(e.length>0){const i=e[Math.floor(o()*e.length)];if(!i)return;A.swapWith(i)}}}var P,U;class Ne extends B{constructor(A){const{dispersionRate:e,fluidDispersionFactor:i,maxFramesOfMovementWithoutSleep:n}={dispersionRate:10,fluidDispersionFactor:.005,maxFramesOfMovementWithoutSleep:250+o()*250,...A};super();l(this,P,0);l(this,U,void 0);t(this,"dispersionRate");t(this,"fluidDispersionFactor");this.dispersionRate=e,this.fluidDispersionFactor=i,Q(this,U,n)}step({cell:A,grid:e}){var d,p;let i=!1;const n=[-1,1];o()>=.5&&n.reverse(),A.isSleeping&&n.every(E=>{const C=A.getNeighbourInDirection(h.create(E,0));return C!=null&&C.empty?(A.swapWith(C),rA(this,P)._++,!1):!0}),a(this,U)<0||a(this,P)<=a(this,U)?n.every(E=>(e.getCellsInLine(A.position,h.add(A.position,h.create(E*this.dispersionRate,0)),{excludeStart:!0}).every(C=>C?C.empty||A instanceof L&&C instanceof L&&o()<this.fluidDispersionFactor?(A.swapWith(C),i=!0,rA(this,P)._++,!1):!(C instanceof gA):!0),!i)):((d=A.dir.W())!=null&&d.empty||(p=A.dir.E())!=null&&p.empty)&&A.die()}}P=new WeakMap,U=new WeakMap;class Pe extends B{constructor(A=.05){super();t(this,"survivalChance");this.survivalChance=A}step({cell:A}){if(o()<this.survivalChance)return;A.getNeighbourhood().map(n=>n instanceof S?1:0).reduce((n,d)=>n+d)>2&&A.die()}}var Y;class Ue extends B{constructor(A=.05,e=5){super();t(this,"eatChance");t(this,"starveTime");l(this,Y,0);this.eatChance=A,this.starveTime=e}step({cell:A,deltaTime:e}){if(Q(this,Y,a(this,Y)+e),a(this,Y)>this.starveTime){A.die();return}if(o()>this.eatChance)return;const i=A.getNeighbourhood().filter(n=>n&&!(n!=null&&n.empty)&&n instanceof ee);if(i.length>0){const n=i[Math.floor(o()*i.length)];if(!n)return;n.die(),Q(this,Y,0)}}}Y=new WeakMap;class Ye extends B{constructor(A=.005){super();t(this,"erosionFactor");this.erosionFactor=A}step({cell:A}){if(this.erosionFactor>0){const e=A.dir.S();e instanceof M&&o()<this.erosionFactor&&A.swapWith(e)}}}class z extends B{constructor(A){super();t(this,"minAge");t(this,"maxAge");t(this,"survivalChance");const{minAge:e,maxAge:i,survivalChance:n}={minAge:1,maxAge:100,survivalChance:.95,...A};this.minAge=e,this.maxAge=i,this.survivalChance=n}step({cell:A}){A.age<this.minAge||(A.age>this.maxAge&&A.die(),o()>this.survivalChance&&A.die())}}class tA extends B{step(){}}class nA extends B{constructor(A=.05){super();t(this,"ignitionFactor");this.ignitionFactor=A}step({grid:A,cell:e}){this.ignitionFactor>0&&e.getNeighbourhood().forEach(i=>{var n;if(!(o()>this.ignitionFactor)&&i&&i!=null&&i.hasBehaviorOfType(D)){const d=((n=i.getBehaviorOfType(D))==null?void 0:n.ignitionFactor)||1;o()<d&&A.setAtIndex(i.index,new Ae(A))}})}}class D extends B{constructor(A=.5){super();t(this,"ignitionFactor");this.ignitionFactor=A}step(){}}var H,q;class uA extends B{constructor(A){super();t(this,"isGlittering",!1);t(this,"glitterChance");t(this,"glitterMaxTime");t(this,"glitterColor");l(this,H,void 0);l(this,q,0);const{glitterChance:e,glitterMaxTime:i,glitterColor:n}={glitterChance:2e-4,glitterMaxTime:.1,glitterColor:[255,255,255,255],...A};this.glitterChance=e,this.glitterMaxTime=i,this.glitterColor=n}step({grid:A,cell:e,deltaTime:i}){this.isGlittering?(Q(this,q,a(this,q)+i),a(this,q)>this.glitterMaxTime&&(a(this,H)&&(e.color=a(this,H),Q(this,H,void 0),A.registerChanged(e)),this.isGlittering=!1)):o()<this.glitterChance&&(Q(this,H,e.color),e.color=this.glitterColor,this.isGlittering=!0,A.registerChanged(e))}}H=new WeakMap,q=new WeakMap;class MA extends B{step({grid:s,cell:A}){s.registerChanged(A)}}class _A extends B{constructor(A=.05,e=1,i=2){super();t(this,"jumpChance");t(this,"jumpHeight");t(this,"jumpLength");this.jumpChance=A,this.jumpHeight=e,this.jumpLength=i}step({cell:A}){if(!h.abs(A.velocity).isNear(h.zero,.1)||o()>this.jumpChance)return;const e=(o()*2-1)*this.jumpLength,i=-o()*this.jumpHeight;A.acceleration.setXY(e,i),o()<.1&&A.acceleration.multiplyScalar(1.2),A.awake()}}class We extends B{step({cell:s}){if(!s.isSleeping||o()<.995)return;s.getNeighbourhood().map(i=>i===void 0?1:i.empty?.5:i.hasBehaviorOfType(nA)?5:i instanceof ie?-1:i instanceof gA||i instanceof S?1:0).reduce((i,n)=>i+n)>0&&s.die()}}var Z;const GA=class GA extends B{constructor(A){super();l(this,Z,void 0);Q(this,Z,A)}step(A){a(this,Z).call(this,A),A.cell.removeBehaviorOfName(GA.name)}};Z=new WeakMap;let OA=GA;class $A extends B{step(){}}class Xe extends B{constructor(A=.005){super();t(this,"poisonFactor");this.poisonFactor=A}step({cell:A}){if(this.poisonFactor>0){if(o()>this.poisonFactor)return;A.getNeighbourhood().every(e=>e&&e.hasBehaviorOfType($A)?(e.die(),A.die(),!1):!0)}}}class L extends cA{constructor(s,A){super(s,A);const{gravity:e,dispersionRate:i,erosionFactor:n}={gravity:T.defaultGravity,...A};this.addBehaviors(new T({gravity:e}),new Ne({dispersionRate:i}),new Ye(n))}step(s){if(super.step(s),o()>.2)return;const A=this.dir.N();A instanceof L&&this.density<A.density&&this.swapWith(A)}}class S extends L{}class Le extends S{constructor(A,e){super(A,{...e,dispersionRate:3});t(this,"_r",Math.round(o()*100)+155);t(this,"name","acid");t(this,"density",700);t(this,"color",[30,230,50,this._r]);this.addBehaviors(new VA,new tA,new uA)}die(){this.grid.set(this.position,o()<.25?new dA(this.grid):this.grid.createEmpty())}}class Je extends M{constructor(A,e){super(A,e);t(this,"name","coal");t(this,"_r",o()*20);t(this,"color",[80-this._r,80-this._r,80-this._r,255]);this.addBehaviors(new eA,new D)}}class Te extends cA{constructor(A){super(A,{empty:!0});t(this,"name","empty");t(this,"brushSize",2);t(this,"brushFillRate",1);t(this,"color",[0,0,0,0]);this.sleep()}awake(){}step(){}}class bA extends cA{constructor(A,e){super(A,{shouldTryAwakeNeighbours:!0,...e});t(this,"brushSize",4);t(this,"brushFillRate",.5);this.awake()}sleep(){}}var w,W,V,_,$,kA;class Ae extends bA{constructor(A,e){super(A,e);l(this,$);t(this,"name","fire");t(this,"brushFillRate",.05);l(this,w,o()*20);l(this,W,[[171-a(this,w),42,37,235+a(this,w)],[222-a(this,w),55,49,235+a(this,w)],[222-a(this,w),109,56,235+a(this,w)],[255-a(this,w),155,79,235+a(this,w)],[252-a(this,w),249,96,235+a(this,w)]]);l(this,V,o()*.4+.3);l(this,_,1);this.addDelayedBehaviors(()=>this.getNeighbourhood().find(i=>(i==null?void 0:i.hasBehaviorOfType(D))||!1)?!1:this.age>=a(this,V),new OA(({cell:i})=>{i.velocity.add(h.create((o()*2-1)*.1,0))}),new T({gravity:h.create(.001,-o()*10)}),new Ge),this.addBehaviors(new nA,new z({minAge:3,maxAge:8,survivalChance:.99})),b(this,$,kA).call(this),this.awake()}step(A){if(super.step(A),b(this,$,kA).call(this),this.age<=a(this,V))return;this.getNeighbourhood().map(n=>n?n.hasBehaviorOfType(tA)?-2:n.hasBehaviorOfType(nA)?2:n.hasBehaviorOfType(D)?1:-.1:0).reduce((n,d)=>n+d)<-.5&&Q(this,_,a(this,_)-1),a(this,_)<=0&&this.die()}sleep(){}die(){this.grid.setAtIndex(this.index,o()<.05?new $e(this.grid):o()<.85?this.grid.createEmpty():o()<.4?new dA(this.grid):new RA(this.grid))}}w=new WeakMap,W=new WeakMap,V=new WeakMap,_=new WeakMap,$=new WeakSet,kA=function(){const A=Math.floor(o()*a(this,W).length)%a(this,W).length;this.color=a(this,W)[A]};class jA extends M{constructor(A,e){super(A,e);t(this,"name","flea");t(this,"_r",o()*20);t(this,"color",[0,this._r,0,255]);t(this,"brushFillRate",.005);const i=7;this.addDelayedBehaviors(()=>this.age>2,new _A),this.addBehaviors(new Fe(()=>new jA(A),2,i,.1),new Pe(.05),new Ue,new ze,new D,new MA,new $A)}die(){this.grid.setAtIndex(this.index,new Ke(this,this.grid))}}class Ke extends M{constructor(A,e,i){super(e,i);t(this,"name","dead flea");t(this,"_r",o()*20+10);t(this,"color");this.color=[...A.color.slice(0,3).map(n=>n+this._r),255],this.addBehaviors(new eA,new z({minAge:2,survivalChance:.995}),new D)}}class iA extends L{constructor(s,A){super(s,{dispersionRate:2,gravity:h.create(0,-.025),erosionFactor:0,shouldTryAwakeNeighbours:!1,...A})}}class dA extends iA{constructor(A,e){super(A,{gravity:h.multiplyScalar(h.up,.05),dispersionRate:50,...e});t(this,"name","fumes");t(this,"density",10);t(this,"_r",Math.round(o()*80)+100);t(this,"color",[255,200,200,this._r]);this.addBehaviors(new z({minAge:10}),new D(.8))}die(){this.grid.set(this.position,o()<.05?new te(this.grid):this.grid.createEmpty())}}class lA extends gA{constructor(A,e){super(A,{shouldTryAwakeNeighbours:!1,...e});t(this,"brushSize",2);t(this,"brushFillRate",1);this.sleep()}awake(){}}class ee extends lA{constructor(A,e){super(A,e);t(this,"name","leaf");t(this,"_r",o()*20);t(this,"brushFillRate",.4);t(this,"color",[100-this._r,180-this._r,100-this._r,255-this._r]);this.addBehaviors(new D(.6))}}function qe(r){const[s,A,e]=r,i=A*Math.min(e,1-e),n=d=>{const p=(d+s/30)%12;return e-i*Math.max(Math.min(p-3,9-p,1),-1)};return[Math.round(n(0)*255),Math.round(n(8)*255),Math.round(n(4)*255)]}class Ze extends M{constructor(A,e){super(A,e);t(this,"name","magic dust");t(this,"color",[...qe([Date.now()/20%360,.6,.5]),255]);this.addBehaviors(new eA(.2),new uA,new D)}}class te extends S{constructor(A,e){super(A,{...e,dispersionRate:3});t(this,"name","oil");t(this,"density",800);t(this,"_r",o()*20);t(this,"color",[80-this._r,70-this._r,130-this._r,255]);this.addBehaviors(new uA({glitterColor:[0,0,0,255]}),new D(.7))}die(){this.grid.set(this.position,o()<.7?new dA(this.grid):this.grid.createEmpty())}}class Ve extends iA{constructor(A,e){super(A,{gravity:h.multiplyScalar(h.up,.05),dispersionRate:50,...e});t(this,"name","poison-gas");t(this,"density",10);t(this,"_r",Math.round(o()*80)+100);t(this,"color",[180,255,180,this._r]);this.addBehaviors(new z({minAge:10}),new VA(h.up),new Xe)}}class _e extends M{constructor(A,e){super(A,e);t(this,"name","sand");t(this,"_r",o()*20);t(this,"color",[191-this._r,155-this._r,123-this._r,255]);this.addBehaviors(new eA,new tA)}}class RA extends iA{constructor(A,e){super(A,e);t(this,"name","smoke");t(this,"density",10);t(this,"color",[90,90,90,Math.round(o()*185)+70]);this.addBehaviors(new z({minAge:5}))}}class ie extends M{constructor(A,e){super(A,e);t(this,"name","snow");t(this,"_r",o()*20);t(this,"color",[220-this._r,220-this._r,255,255]);this.addBehaviors(new We,new eA(.05),new tA,new MA)}getRGBA(){return this.isSleeping?this.color:[220,220,255,255]}die(){this.grid.set(this.position,o()<.25?new FA(this.grid):this.grid.createEmpty())}}var y,X,AA,SA;class $e extends bA{constructor(A,e){super(A,e);l(this,AA);t(this,"name","spark");t(this,"brushFillRate",.05);l(this,y,o()*20);l(this,X,[[160-a(this,y),20,20,235+a(this,y)],[121-a(this,y),80,20,235+a(this,y)],[225-a(this,y),190-a(this,y),20-a(this,y),235+a(this,y)]]);this.acceleration.add(h.random().multiplyScalar(2).subtractScalar(1).multiply(h.create(1,.1))),this.addBehaviors(new T,new nA,new _A(.005),new z({minAge:1,maxAge:5}),new MA),b(this,AA,SA).call(this),this.awake()}step(A){super.step(A),b(this,AA,SA).call(this)}sleep(){}die(){this.grid.set(this.position,o()>.25?new RA(this.grid):this.grid.createEmpty())}}y=new WeakMap,X=new WeakMap,AA=new WeakSet,SA=function(){const A=Math.floor(o()*a(this,X).length)%a(this,X).length;this.color=a(this,X)[A]};class se extends iA{constructor(A,e){super(A,e);t(this,"name","steam");t(this,"density",10);t(this,"_r",Math.round(o()*80)+100);t(this,"color",[255,255,255,this._r]);this.addBehaviors(new z({minAge:5}))}die(){this.grid.set(this.position,o()<.05?new FA(this.grid):this.grid.createEmpty())}}class At extends lA{constructor(){super(...arguments);t(this,"name","stone");t(this,"color",[100,100,100,255])}}class FA extends S{constructor(A,e){super(A,{...e,dispersionRate:3});t(this,"_r",Math.round(o()*100)+155);t(this,"name","water");t(this,"density",1e3);t(this,"color",[46,137,255,this._r]);this.addBehaviors(new uA({glitterColor:[86,177,255,255]}),new tA)}die(){this.grid.set(this.position,o()<.25?new se(this.grid):this.grid.createEmpty())}}class et extends lA{constructor(A,e){super(A,e);t(this,"name","wood");t(this,"_r",o()*20);t(this,"color",[180-this._r,100-this._r,100-this._r,255-this._r]);this.addBehaviors(new D)}}var hA,re;class tt extends Ie{constructor(A){super(A);l(this,hA);t(this,"materialPalette");this.materialPalette=b(this,hA,re).call(this,this.grid)}createGrid(A){return new we({...A,createEmpty:e=>new Te(e)})}step(A){this.grid.forEachChangedChunkPass(e=>{e.forEach(i=>{i.haveChanges()&&i.forEachChanged(n=>{n.step(A),n.isSleeping||this.grid.registerChanged(n)},{alternateRowDirections:!0,resetChanges:!0})})},!1)}}hA=new WeakSet,re=function(A){return Object.fromEntries([()=>A.createEmpty(),()=>new Le(A),()=>new Je(A),()=>new jA(A),()=>new Ae(A),()=>new dA(A),()=>new ee(A),()=>new Ze(A),()=>new te(A),()=>new Ve(A),()=>new _e(A),()=>new RA(A),()=>new ie(A),()=>new se(A),()=>new At(A),()=>new FA(A),()=>new et(A)].map(i=>[i().name,i]))};function it(r){const{image:s,offset:A,multiplier:e}=r,[i]=ye(()=>({transform:`translate(${h.multiplyScalar(A,e).multiplyScalar(100).toArray().map(n=>n+"%").join(", ")}) scale(${1+e})`,config:{mass:5,friction:20,tension:70}}),[A,e]);return u.jsx(Oe.div,{className:"layer",style:{...i,backgroundImage:`url(${s})`}})}function ne(r){const{layers:s,multiplier:A,style:e}={multiplier:1,...r};I.useEffect(()=>(window.addEventListener("mousemove",d),()=>{window.removeEventListener("mousemove",d)}));const[i,n]=I.useState(h.zero);function d(p){const E=h.fromArray([window.innerWidth,window.innerHeight]);n(h.fromArray([p.clientX,p.clientY]).divide(E).multiplyScalar(2).subtractScalar(1))}return u.jsx("div",{className:"parallax",style:e,children:s.map((p,E)=>{const{multiplier:C,...F}=p;return u.jsx(it,{multiplier:C*A,...F,offset:i},E)})})}const st="/assets/1-KSi_JrUG.png",rt="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAkAAAAFECAYAAADP44G9AAAAAXNSR0IArs4c6QAABFdJREFUeJzt2UERgEAMBMFAnWYMIBcTuLh7TLeCPFOzMwAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAHtc3/tcp48AANhpzcx9+ggAgJ3WzChAAECKAgQA5ChAAECOAgQA5HiAAIAcExgAkKMAAQA5ChAAkKMAAQA5HiAAIMcEBgDkKEAAQI4CBADkKEAAQI4HCADIMYEBADkKEACQowABADkKEACQ4wECAHJMYABAjgIEAOQoQABAjgIEAOR4gACAHBMYAJCjAAEAOQoQAJCjAAEAOR4gACDHBAYA5ChAAECOAgQA5ChAAECOAgQA5ChAAECOBwgAyDGBAQA5ChAAkKMAAQA5ChAAkOMBAgByTGAAQI4CBADkKEAAQI4CBADkeIAAgBwTGACQowABADkKEACQowABADkeIAAgxwQGAOQoQABAjgIEAOQoQABAjgcIAMgxgQEAOQoQAJCjAAEAOQoQAJDjAQIAckxgAECOAgQA5ChAAECOAgQA5ChAAECOAgQA5HiAAIAcExgAkKMAAQA5ChAAkKMAAQA5HiAAIMcEBgDkKEAAQI4CBADkKEAAQI4HCADIMYEBADkKEACQowABADkKEACQ4wECAHJMYABAjgIEAOQoQABAjgIEAOR4gACAHBMYAJCjAAEAOQoQAJCjAAEAOR4gACDHBAYA5ChAAECOAgQA5ChAAECOAgQA5ChAAECOBwgAyDGBAQA5ChAAkKMAAQA5ChAAkOMBAgByTGAAQI4CBADkKEAAQI4CBADkeIAAgBwTGACQowABADkKEACQowABADkeIAAgxwQGAOQoQABAjgIEAOQoQABAjgcIAMgxgQEAOQoQAJCjAAEAOQoQAJDjAQIAckxgAECOAgQA5ChAAECOAgQA5ChAAECOAgQA5HiAAIAcExgAkKMAAQA5ChAAkKMAAQA5HiAAIMcEBgDkKEAAQI4CBADkKEAAQI4HCADIMYEBADkKEACQowABADk/71MFHcjs5IQAAAAASUVORK5CYII=",nt="data:image/png;base64,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",at="/assets/4-zEwzv9ax.png";function ot(r){return u.jsx(ne,{multiplier:-.008,...r,layers:[{image:st,multiplier:1},{image:rt,multiplier:.75},{image:nt,multiplier:.5},{image:at,multiplier:.35}]})}const ht="data:image/png;base64,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",ct="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAkAAAAFECAYAAADP44G9AAAAAXNSR0IArs4c6QAABKhJREFUeJzt3SFuG0EUgOHZKiCVGhAaqaQFlmoQGJILxKg4tFJwj1KcAxgXORcwCQxwpQVBlUwLUqlmWxB5NV7Z620by/Xb70N2nEiDVr/eeDIpAQAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAQSLHvBQC7VT3cr7x/++Wx2vS73z+/X3kmFOcXO1oVwH4JIAgsj583d79Wwuf68jillNJoMKx/NilnaTxdpJ9Xr+tngwgCInq17wUAu9GMn2XwpLQ+fvLPbp6qOpaaEySACAQQBLRp8nN9eZzyEGrKg+jr2QcRBIQlgCCwPH7G00WnvxkNhnUI5REEEIkAgqCa217rTMrZ1s+b3x0CiOBo3wsAdmMZP9siqM3zJKg9kgAOkQkQBNQ86p5vazVNylnrJGg0GLYenQc4RAIIAvoxOKtf5+GzKYJSat8Ou/r07mUWBvCfEEAQ2LrgaYsggL4QQEBKSRgB/SKAoIeasSN+gL4RQBDUtqgRPUCfOQYPAZ2W8zQpN193sdQ1grr+E0WAQ2ECBAHlt7pvO+beRX45KkAEAgiC+tOpzTKU/jWWAA6BAIKg8qnNtq2uZvTk7z/Ov5n+AOH4DhAEdntSFH97oemknKXbk0L8ACF5uEFQ1cN9/bpLBDWnQHn8FOcXL7k0gL0TQBBYHkE3T1XVZStsPF2sbJ+JHyAiAQTB5RGU0vNFqfldYbnTcr5ygkz8AAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAsM5vx02eZ10TU0gAAAAASUVORK5CYII=",gt="/assets/3-VChkUrAd.png",ut="data:image/png;base64,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";function dt(r){return u.jsx(ne,{multiplier:-.008,...r,layers:[{image:ht,multiplier:1},{image:ct,multiplier:.5},{image:gt,multiplier:.4},{image:ut,multiplier:.25}]})}const WA="solid",XA="magic dust",LA={solid:pe,liquid:xe,gas:Re,static:Ee,effect:me};function pt(){const r=h.create(320,192),s=I.useRef(null),A=I.useRef(void 0),[e,i]=be(),[n,d]=yA(!1),[p,E]=yA([0,0]),[C,F]=yA(XA),[sA,BA]=I.useState(!1),[CA,fA]=I.useState(void 0),[pA,EA]=I.useState({}),[mA,QA]=I.useState(WA),[IA,HA]=I.useState({[mA||WA]:C.current});function ae(){const f=new tt({gridOptions:{size:r}}),c=Object.values(f.materialPalette).map(g=>g()),m={solid:v.chain(c).filter(g=>g instanceof M).map(g=>g.name).value(),liquid:v.chain(c).filter(g=>g instanceof S).map(g=>g.name).value(),gas:v.chain(c).filter(g=>g instanceof iA).map(g=>g.name).value(),static:v.chain(c).filter(g=>g instanceof lA).map(g=>g.name).value(),effect:v.chain(c).filter(g=>g instanceof bA).map(g=>g.name).value()};return EA(m),HA(g=>({...g,...v.chain(m).toPairs().map(([O,k])=>{if(!v.has(g,O))return[O,v.first(k)]}).compact().fromPairs().value()})),f}function oe(f){var J;const m=f.target.getBoundingClientRect(),g=[(f.clientX-m.x)/m.width,(f.clientY-m.y)/m.height];E(g);const O=(J=s.current)==null?void 0:J.simulation;if(!O)return;const k=O.grid.getAtPosition(h.create(...g).multiply(O.grid.size).floor());k&&fA(k.empty?void 0:k.name)}function he(f){ge(f.grid)}function ce(){d(!0)}function zA(){d(!1),A.current=void 0}function ge(f){var PA;if(!n.current||!C.current)return;const c=h.fromArray(p.current).multiply(f.size).floor(),m=(PA=s.current)==null?void 0:PA.simulation;if(!m)return;const O=m.materialPalette[C.current];if(!O)return;const k=O(),J=Math.floor(k.brushSize/2),de=A.current?f.getCellsInLine(A.current,c):v.compact([f.getAtPosition(c)]),NA=[];de.every(UA=>{if(!UA)return!0;for(let wA=-J;wA<k.brushSize;wA++)for(let DA=-J;DA<k.brushSize;DA++){if(o()>k.brushFillRate)continue;const vA=f.getAtPosition(h.add(UA.position,h.create(DA,wA)));if(!vA||NA.indexOf(vA.index)!==-1)continue;const YA=O();f.setAtPosition(vA.position,YA),NA.push(YA.index)}return!0}),A.current=c}function ue(){var c;if((c=s.current)!=null&&c.simulation)return{transform:`translate(${h.fromArray(p.current).multiply(h.fromArray([i.width,i.height])).add(h.fromArray([15,-4])).toArray().map(m=>m+"px").join(", ")})`}}return u.jsxs("div",{className:"route sand",children:[u.jsx("div",{className:"content",ref:e,children:u.jsx(De,{ref:s,resetChanges:!1,background:sA?u.jsx(ot,{style:{opacity:.6,filter:"blur(4px)"}}):u.jsx(dt,{}),toolBarPanel:u.jsxs("div",{className:"panel materials",children:[u.jsx("div",{className:`item${C.current==="empty"?" selected":""}`,children:u.jsxs(u.Fragment,{children:[u.jsx(Ce,{}),"remove"]}),onClick:()=>{QA(void 0),F("empty")}}),u.jsx("div",{className:"separator"}),v.map(pA,(f,c)=>u.jsx(fe,{trigger:u.jsxs("div",{className:`item${mA===c?" selected":""}`,onClick:()=>{IA[c]&&(QA(c),F(IA[c]||XA))},children:[LA[c]?LA[c]({}):u.jsx(je,{}),u.jsx("div",{children:mA===c&&IA[c]||c})]}),children:v.map(f,m=>u.jsx("div",{className:`item${C.current===m?" selected":""}`,children:m,onClick:()=>{QA(c),F(m),HA(g=>({...g,[c]:m}))}},m))},c))]}),toolBarConfigExtra:u.jsx(u.Fragment,{children:u.jsx(ve,{id:"isDay",checked:sA,onChange:BA})}),pickColor:({cell:f,renderOptions:c})=>c!=null&&c.debugDraw&&!f.isSleeping?[255,255,255,255]:f.getRGBA(),initSimulation:ae,onStep:he,onPointerDown:ce,onPointerUp:zA,onPointerLeave:zA,onPointerMove:oe})}),u.jsx("div",{className:"pointer-info-text",style:ue(),children:CA})]})}export{pt as default};
