var R=Object.defineProperty;var z=(s,t,e)=>t in s?R(s,t,{enumerable:!0,configurable:!0,writable:!0,value:e}):s[t]=e;var p=(s,t,e)=>(z(s,typeof t!="symbol"?t+"":t,e),e),c=(s,t,e)=>{if(!t.has(s))throw TypeError("Cannot "+e)};var n=(s,t,e)=>(c(s,t,"read from private field"),e?e.call(s):t.get(s)),h=(s,t,e)=>{if(t.has(s))throw TypeError("Cannot add the same private member more than once");t instanceof WeakSet?t.add(s):t.set(s,e)},x=(s,t,e,r)=>(c(s,t,"write to private field"),r?r.call(s,e):t.set(s,e),e);var m=(s,t,e)=>(c(s,t,"access private method"),e);import{r as w,j as a,m as G,l as g}from"./index-9Jq22hKg.js";import{b as C,n as b,G as y,u as E,a as v,V as M}from"./index-vL9_vmK8.js";class f extends y{constructor(e,r){super(e);p(this,"wall");this.wall=r||!1}getRGBA(){return this.wall?[255,0,100,255]:[0,0,0,0]}}var i,l,j;class k{constructor(t){h(this,l);h(this,i,void 0);x(this,i,new C({...t,createEmpty:e=>new f(e)})),this.restart()}getGrid(){return n(this,i)}restart(){n(this,i).forEach(t=>{n(this,i).set(t.position,new f(n(this,i),Math.random()<.3))})}step(t){const e=n(this,i).map(r=>r.wall);n(this,i).forEach(r=>{let u=m(this,l,j).call(this,e,r);r.wall!==u&&n(this,i).setAtIndex(r.index,new f(n(this,i),u))})}}i=new WeakMap,l=new WeakSet,j=function(t,e){let r=0;return e.position.x===0||e.position.x===n(this,i).size.x-1||e.position.y===0||e.position.y===n(this,i).size.y-1||(b.forEach(u=>{const d=n(this,i).position2index(e.position.add(u));t[d]===!0&&r++}),r<4)?!0:r>4?!1:e.wall};function A(){const s=new M(160,90),t=w.useRef(),[e,r]=E(void 0);w.useEffect(()=>{t.current=new k({size:s}),r(t.current.getGrid()),d()},[]);function u(o){o.preventDefault()}function d(){const o=t.current;o&&o.restart()}return a.jsxs("div",{className:"route maze",children:[a.jsxs("div",{style:{position:"absolute",top:0,width:"100%",display:"flex",justifyContent:"center",background:"black",color:"white",zIndex:100},children:[a.jsxs("button",{onClick:()=>{var o;return(o=t.current)==null?void 0:o.step(1)},children:[a.jsx(G,{}),"step"]}),a.jsxs("button",{onClick:()=>d(),children:[a.jsx(g,{}),"reset"]})]}),a.jsx(v,{grid:e.current,onContextMenu:u})]})}export{A as default};
