var G=Object.defineProperty;var z=(s,t,n)=>t in s?G(s,t,{enumerable:!0,configurable:!0,writable:!0,value:n}):s[t]=n;var x=(s,t,n)=>(z(s,typeof t!="symbol"?t+"":t,n),n),O=(s,t,n)=>{if(!t.has(s))throw TypeError("Cannot "+n)};var h=(s,t,n)=>(O(s,t,"read from private field"),n?n.call(s):t.get(s)),m=(s,t,n)=>{if(t.has(s))throw TypeError("Cannot add the same private member more than once");t instanceof WeakSet?t.add(s):t.set(s,n)};import{r as c,j as i,F as B,l as D,m as U,n as V}from"./index-v6eTjaTZ.js";import{G as L,S as N,c as T,V as o,u as p,b as X}from"./index-iyocA4e0.js";import"./react-spring_web.modern-5WTIYr7Q.js";var a;class f extends L{constructor(){super(...arguments);x(this,"age",0);m(this,a,30)}step(n){this.age+=n,this.age>h(this,a)&&this.grid.setAtIndex(this.index,this.grid.createEmpty())}getRGBA(){return[255,0,100,255-Math.min(this.age/h(this,a)*255,255)]}}a=new WeakMap;class Y extends N{createGrid(t){return new T({...t,createEmpty:n=>new f(n)})}step(t){this.grid.forEach(n=>{n.step(t)})}}function Q(){const s=o.create(160,90),t=c.useRef(null),n=c.useRef(void 0),[l,g]=c.useState(!0),[j,S]=p(void 0),[d,C]=p(o.create(0,0));c.useEffect(()=>{const e=t.current;e&&(l?e.start():e.stop())},[l]);function F(){const e=new Y({gridOptions:{size:s}}),r=e.grid;return r.set(o.create(3,3),new f(r)),e}function M(e){e.preventDefault()}function R(){S(void 0),n.current=void 0}function b(e){const r=e.target,{x:u,y:A,width:P,height:E}=r.getBoundingClientRect(),I=o.create(u,A),k=o.create(P,E);C(o.create(e.clientX,e.clientY).subtract(I).divide(k).multiply(s).floor())}function v({grid:e}){y(e)}function y(e){if(j.current===void 0)return;(n.current?e.getCellsInLine(n.current,d.current):[e.getAtPosition(d.current)]).forEach(u=>{u&&e.setAtIndex(u.index,new f(e))}),n.current=d.current}function w(){var e;(e=t.current)==null||e.clear()}return i.jsxs("div",{className:"route fluid",children:[i.jsxs("div",{style:{position:"absolute",top:0,width:"100%",display:"flex",justifyContent:"center",background:"black",color:"white",zIndex:100},children:[i.jsx("button",{onClick:()=>g(e=>!e),children:l?i.jsxs(i.Fragment,{children:[i.jsx(B,{}),"stop"]}):i.jsxs(i.Fragment,{children:[i.jsx(D,{}),"start"]})}),i.jsxs("button",{onClick:()=>{var e;return(e=t.current)==null?void 0:e.step(1)},children:[i.jsx(U,{}),"step"]}),i.jsxs("button",{onClick:()=>w(),children:[i.jsx(V,{}),"reset"]})]}),i.jsx(X,{ref:t,initSimulation:F,onStep:v,onMouseUp:R,onMouseMove:b,onContextMenu:M})]})}export{Q as default};
